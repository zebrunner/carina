{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Carina is a Java-based test automation framework that unites all testing layers: Mobile applications (web, native, hybrid), WEB applications, REST services, Databases. TRY DEMO PROJECT NOW Carina framework is built on top of the most popular open-source solutions like Selenium, Appium, TestNG allowing to reduce dependence on the specific technology stack. Carina supports all popular browsers (IE, Safari, Chrome, Firefox) and mobile devices (iOS/Android). A special feature for a mobile domain: it reuses test automation code between IOS/Android up to 70-80%. As far as our framework is built in Java, it is cross-platform. Tests may be easily executed both on Unix or Windows OS. All you need is JDK 8 installed. The framework supports different types of databases - both relational and nonrelational (MySQL, SQL Server, Oracle, PostgreSQL), providing amazing experience of DAO layer implementation using MyBatis ORM framework. API testing is based on a Freemarker template engine. It enables great flexibility in generating REST requests, and responses are dynamically changed by incoming arguments. Carina is fully integrated into QPS-Infra that helps to setup a production-ready environment for running Mobile, Web and API tests. Feel free to ask any questions if you are going to use it in your company.","title":"Overview"},{"location":"configuration/","text":"Configuration files There are multiple properties files located in src/main/resources: api.properties - API test endpoints reference config.properties - global test configuration database.properties - database connection properties email.properties - emailable reports config testdata.properties - test user credentials All the properties may be retrieved in a test using R class: R.API.get( GetUserMethods ) R.CONFIG.get( browser ) R.DATABASE.get( db.url ) R.EMAIL.get( title ) R.TESTDATA.get( user.email ) The default config properties can be obtained by Configuration.get(Parameter.BROWSER) All the project configuration properties are located in a _config.properties file. In the table below we are providing the description of most of the parameters: Attribute Meaning Example url Base application URL http://qaprosoft.com browser Browser for testing chrome / firefox / safari / iexplore selenium_host Selenium server host http://localhost:4444/wd/hub app_version Application version/build number for reporting 1.2.5 locale Locale for using L10N feature. Enabled when enable_l10n=true en_GB,de_DE,fr_FR language Language for i18n defeature. Enabled when enable_i18n=true en_GB,de_DE,fr_FR retry_interval Timeout interval between calling HTML DOM for the element. Note: in ms. For mobile automation specify the number from 500-1500 range Integer auto_screenshot Global switch for taking screenshots. When disabled, only failures will be captured Boolean report_url Direct HTTP link to Jenkins workspace report folder. Automatically specified by CI http://localhost:8888/job /my_project/1/eTAF_Report max_screen_history Max number of reports in history Integer jira_url JIRA base URL for direct links with bugs description https://jira.carina.com/browse/ email_list Comma-separated list of emails for reports u1@gmail.com,u2@gmail.com env Environment specific configuration. More about this feature STAG, PROD, DEMO env_arg_resolver This parameter is optional, if it isn't set, the default value will be used. In most cases, the default value is enough java class platform Platform version for Selenium Grid ANDROID,IOS,WINDOWS,MAC,LINUX browser_version Browser version or an empty string if unknown for Selenium Grid \"8.0\", \"52.1\" browser_language Browser language or nothing to use the English version by default. Note: Only applicable for Chrome and Firefox! \"es\", \"fr\" driver_event_listeners Comma-separated list of listeners. Listeners provide more logs from WebDriver and have to be the instances of WebDriverEventListener com.someCompane.core.EventListener max_driver_count Max number of drivers per thread Integer custom_capabilities Name of a properties file with custom capabilities (key-value) custom.properties proxy_host Hostname of the server host.example.com proxy_port Port number 80 proxy_protocols Comma-separated list of internet protocols used to carry the connection information from the source requesting the connection to the destination for which the connection was requested. http, https, ftp, socks browsermob_proxy Boolean parameter which enables or disables the automatic BrowserMob proxy launch true, false browsermob_port Port number for BrowserMob proxy (if nothing or 0 specified, then any free port will be reused) Integer proxy_set_to_system Boolean parameter which enables or disables the setup of a proxy true, false failure_email_list Comma-separated list of emails for failure reports u1@mail.com,u2@mail.com track_known_issues Boolean parameter. If it is true and some Jira tickets are associated with the test, in case of failure Jira info will be added to the report true,false explicit_timeout Timeout is seconds to wait for a certain condition to occur before proceeding further in the code Integer auto_download The enabled parameter prevents downloading a dialog and downloading a file automatically. The feature is currently available for Chrome and FireFox false, true auto_download_apps MIME types / Internet Media Types. The parameter is necessary only to configure auto downloading for FireFox application/pdf, list of values project_report_directory Path to a folder where the reports will be saved ./reports/qa big_screen_width Screenshots will be resized according to this width if their own width is bigger 500, 1200, Integer big_screen_height Screenshots will be resized according to this height if their own height is bigger 500, 1200, Integer small_screen_width Thumbnails' width Integer big_screen_height Thumbnails' height Integer big_screen_height Thumbnails' height Integer init_retry_count Number of attempts to create a driver. The default value 0 means that there will be only 1 attempt Integer init_retry_interval Interval is seconds between the attempts to create a driver Integer retry_count Number of test-retryings in case of failure. The default value 0 means that a test will be performed only once Integer enable_l10n Enables L10N feature false, true l10n_encoding Charset for l10n feature ISO-8859-5, ISO-8859-6, UTF-8 enable_i18n Enables i18n feature false, true thread_count Default number of threads to use when running tests in parallel. fInteger data_provider_thread_count Default number of threads to use for data providers when running tests in parallel. Integer core_log_level Level for Carina logging ALL, DEBUG, ERROR, WARN, FATAL, INFO, OFF, TRACE core_log_packages Comma-separated list of core packages where you want to redefine the log level com.qaprosoft.carina.core, ZafiraConfigurator etc log_all_json API response will be logged in JSON format true, false date_format Date format for DateUtils.class HH:mm:ss dd/MM/yyyy, HH:mm MM/dd/yyyy time_format Date format for DateUtils.class HH:mm:ss.SSS, HH:mm a zzz crypto_key_path Path to a file with a crypto key ./src/main/resources/crypto.key suite_name Suite name for the report and TestRail. If this parameter is NULL, will be taken from TestNG xml (the parameter suite name) or _email.properties (the title) Advanced Acceptance jira_updater Class contains logic to update Jira. Note Custom updater has to implement DefaultJiraUpdater, by default, the methods do nothing Custom class jira_url URL to Jira https://yourclass.atlassian.net jira_user Jira user email admin@yourcompany.com jira_password Jira user password admin123456 jira_suite_id Jira suit id (if you have one) Integer jira_project Jira project id Integer jira_create_new_ticket If the feature is enabled after the test failure, a new Jira ticket will be created true, false optimize_video_recording Enables video recording only for the final retry attempt true, false testrail_milestone Milestone to set on TestRail for run some-milestone testrail_assignee User asserted for the suit asignee_user@yuorcompany.com access_key_id Access key id for Amazon S3. More info here gkhcvdgvceUYF67897hbjsbdc secret_key Secret key for Amazon S3. More info here gkhcvdgvceUYF67897hbjsbdc s3_local_storage Directory for downloading artefacts ./s3 appcenter_token Token for authentication in Hockey App gkhcvdgvceUYF67897hbjsbdc appcenter_local_storage Directory for AppCenter artifacts ./appcenter add_new_localization Should be set to 'true' if you want to create new localization files for the required Locale. Otherwise, there will be just the localization checking false, true add_new_localization_encoding Encoding for a new localization utf-16, utf-32 add_new_localization_path Path where the created localization properties should be saved. If null, they will be added to an artifactory folder in the report utf-16, utf-32 add_new_localization_property_name Path where the created localization properties should be saved. If null, they will be added to an artifactory folder in the report Basic template for property name. tls_keysecure_location Path to a directory with tls secure keys ./tls/keysecure health_check_class Class to execute health checks Custom class health_check_methods Comma-separated list of methods of health_check_class to execute preliminarily doThis, doThat Most of the properties may be read in the following way: Configuration.get(Parameter.URL) // returns string value Configuration.getBoolean(Parameter.AUTO_SCREENSHOT) // returns boolean value Configuration.getInt(Parameter.SMALL_SCREEN_WIDTH) // returns integer value Configuration.getDouble(Parameter.BROWSER_VERSION) // returns double value Environment specific configuration In some cases, it is required to support multiple environments for testing. Let's assume we have STAG and PROD environments which have different application URLs. In this case, we need to specify the following properties in _config.properties: env=PROD STAG.url=http://stag-app-server.com PROD.url=http://prod-app-server.com And get an env-specific argument in the test in the following way: Configuration.getEnvArg( url ) As a result, you switch between the environments just changing the env argument in the _config.properties file. Zafira configuration zafira.properties are used for Zafira QA reporting integration, here you should specify some values for a proper integration: Attribute Meaning Example zafira_enabled Root switch true/false zafira_service_url Webservice URL http://localhost:8080/zafira-ws zafira_project Project name (created in Zafira) empty or any created zafira_rerun_failures Reruns only failures true/false zafira_report_emails List of emails for report user1@qps.com,user2@qps.com zafira_configurator Configurator class (used by default) com.qaprosoft.carina.core.foundation.report.ZafiraConfigurator","title":"Configuration"},{"location":"configuration/#configuration-files","text":"There are multiple properties files located in src/main/resources: api.properties - API test endpoints reference config.properties - global test configuration database.properties - database connection properties email.properties - emailable reports config testdata.properties - test user credentials All the properties may be retrieved in a test using R class: R.API.get( GetUserMethods ) R.CONFIG.get( browser ) R.DATABASE.get( db.url ) R.EMAIL.get( title ) R.TESTDATA.get( user.email ) The default config properties can be obtained by Configuration.get(Parameter.BROWSER) All the project configuration properties are located in a _config.properties file. In the table below we are providing the description of most of the parameters: Attribute Meaning Example url Base application URL http://qaprosoft.com browser Browser for testing chrome / firefox / safari / iexplore selenium_host Selenium server host http://localhost:4444/wd/hub app_version Application version/build number for reporting 1.2.5 locale Locale for using L10N feature. Enabled when enable_l10n=true en_GB,de_DE,fr_FR language Language for i18n defeature. Enabled when enable_i18n=true en_GB,de_DE,fr_FR retry_interval Timeout interval between calling HTML DOM for the element. Note: in ms. For mobile automation specify the number from 500-1500 range Integer auto_screenshot Global switch for taking screenshots. When disabled, only failures will be captured Boolean report_url Direct HTTP link to Jenkins workspace report folder. Automatically specified by CI http://localhost:8888/job /my_project/1/eTAF_Report max_screen_history Max number of reports in history Integer jira_url JIRA base URL for direct links with bugs description https://jira.carina.com/browse/ email_list Comma-separated list of emails for reports u1@gmail.com,u2@gmail.com env Environment specific configuration. More about this feature STAG, PROD, DEMO env_arg_resolver This parameter is optional, if it isn't set, the default value will be used. In most cases, the default value is enough java class platform Platform version for Selenium Grid ANDROID,IOS,WINDOWS,MAC,LINUX browser_version Browser version or an empty string if unknown for Selenium Grid \"8.0\", \"52.1\" browser_language Browser language or nothing to use the English version by default. Note: Only applicable for Chrome and Firefox! \"es\", \"fr\" driver_event_listeners Comma-separated list of listeners. Listeners provide more logs from WebDriver and have to be the instances of WebDriverEventListener com.someCompane.core.EventListener max_driver_count Max number of drivers per thread Integer custom_capabilities Name of a properties file with custom capabilities (key-value) custom.properties proxy_host Hostname of the server host.example.com proxy_port Port number 80 proxy_protocols Comma-separated list of internet protocols used to carry the connection information from the source requesting the connection to the destination for which the connection was requested. http, https, ftp, socks browsermob_proxy Boolean parameter which enables or disables the automatic BrowserMob proxy launch true, false browsermob_port Port number for BrowserMob proxy (if nothing or 0 specified, then any free port will be reused) Integer proxy_set_to_system Boolean parameter which enables or disables the setup of a proxy true, false failure_email_list Comma-separated list of emails for failure reports u1@mail.com,u2@mail.com track_known_issues Boolean parameter. If it is true and some Jira tickets are associated with the test, in case of failure Jira info will be added to the report true,false explicit_timeout Timeout is seconds to wait for a certain condition to occur before proceeding further in the code Integer auto_download The enabled parameter prevents downloading a dialog and downloading a file automatically. The feature is currently available for Chrome and FireFox false, true auto_download_apps MIME types / Internet Media Types. The parameter is necessary only to configure auto downloading for FireFox application/pdf, list of values project_report_directory Path to a folder where the reports will be saved ./reports/qa big_screen_width Screenshots will be resized according to this width if their own width is bigger 500, 1200, Integer big_screen_height Screenshots will be resized according to this height if their own height is bigger 500, 1200, Integer small_screen_width Thumbnails' width Integer big_screen_height Thumbnails' height Integer big_screen_height Thumbnails' height Integer init_retry_count Number of attempts to create a driver. The default value 0 means that there will be only 1 attempt Integer init_retry_interval Interval is seconds between the attempts to create a driver Integer retry_count Number of test-retryings in case of failure. The default value 0 means that a test will be performed only once Integer enable_l10n Enables L10N feature false, true l10n_encoding Charset for l10n feature ISO-8859-5, ISO-8859-6, UTF-8 enable_i18n Enables i18n feature false, true thread_count Default number of threads to use when running tests in parallel. fInteger data_provider_thread_count Default number of threads to use for data providers when running tests in parallel. Integer core_log_level Level for Carina logging ALL, DEBUG, ERROR, WARN, FATAL, INFO, OFF, TRACE core_log_packages Comma-separated list of core packages where you want to redefine the log level com.qaprosoft.carina.core, ZafiraConfigurator etc log_all_json API response will be logged in JSON format true, false date_format Date format for DateUtils.class HH:mm:ss dd/MM/yyyy, HH:mm MM/dd/yyyy time_format Date format for DateUtils.class HH:mm:ss.SSS, HH:mm a zzz crypto_key_path Path to a file with a crypto key ./src/main/resources/crypto.key suite_name Suite name for the report and TestRail. If this parameter is NULL, will be taken from TestNG xml (the parameter suite name) or _email.properties (the title) Advanced Acceptance jira_updater Class contains logic to update Jira. Note Custom updater has to implement DefaultJiraUpdater, by default, the methods do nothing Custom class jira_url URL to Jira https://yourclass.atlassian.net jira_user Jira user email admin@yourcompany.com jira_password Jira user password admin123456 jira_suite_id Jira suit id (if you have one) Integer jira_project Jira project id Integer jira_create_new_ticket If the feature is enabled after the test failure, a new Jira ticket will be created true, false optimize_video_recording Enables video recording only for the final retry attempt true, false testrail_milestone Milestone to set on TestRail for run some-milestone testrail_assignee User asserted for the suit asignee_user@yuorcompany.com access_key_id Access key id for Amazon S3. More info here gkhcvdgvceUYF67897hbjsbdc secret_key Secret key for Amazon S3. More info here gkhcvdgvceUYF67897hbjsbdc s3_local_storage Directory for downloading artefacts ./s3 appcenter_token Token for authentication in Hockey App gkhcvdgvceUYF67897hbjsbdc appcenter_local_storage Directory for AppCenter artifacts ./appcenter add_new_localization Should be set to 'true' if you want to create new localization files for the required Locale. Otherwise, there will be just the localization checking false, true add_new_localization_encoding Encoding for a new localization utf-16, utf-32 add_new_localization_path Path where the created localization properties should be saved. If null, they will be added to an artifactory folder in the report utf-16, utf-32 add_new_localization_property_name Path where the created localization properties should be saved. If null, they will be added to an artifactory folder in the report Basic template for property name. tls_keysecure_location Path to a directory with tls secure keys ./tls/keysecure health_check_class Class to execute health checks Custom class health_check_methods Comma-separated list of methods of health_check_class to execute preliminarily doThis, doThat Most of the properties may be read in the following way: Configuration.get(Parameter.URL) // returns string value Configuration.getBoolean(Parameter.AUTO_SCREENSHOT) // returns boolean value Configuration.getInt(Parameter.SMALL_SCREEN_WIDTH) // returns integer value Configuration.getDouble(Parameter.BROWSER_VERSION) // returns double value","title":"Configuration files"},{"location":"configuration/#environment-specific-configuration","text":"In some cases, it is required to support multiple environments for testing. Let's assume we have STAG and PROD environments which have different application URLs. In this case, we need to specify the following properties in _config.properties: env=PROD STAG.url=http://stag-app-server.com PROD.url=http://prod-app-server.com And get an env-specific argument in the test in the following way: Configuration.getEnvArg( url ) As a result, you switch between the environments just changing the env argument in the _config.properties file.","title":"Environment specific configuration"},{"location":"configuration/#zafira-configuration","text":"zafira.properties are used for Zafira QA reporting integration, here you should specify some values for a proper integration: Attribute Meaning Example zafira_enabled Root switch true/false zafira_service_url Webservice URL http://localhost:8080/zafira-ws zafira_project Project name (created in Zafira) empty or any created zafira_rerun_failures Reruns only failures true/false zafira_report_emails List of emails for report user1@qps.com,user2@qps.com zafira_configurator Configurator class (used by default) com.qaprosoft.carina.core.foundation.report.ZafiraConfigurator","title":"Zafira configuration"},{"location":"contribution/","text":"Configure ssh connection based on git documentation https://help.github.com/articles/connecting-to-github-with-ssh . 1) Fork repository https://github.com/qaprosoft/carina to your own user. 2) Clone your fork to your local machine : git clone git@github.com:your_fork_url/carina.git 3) git remote add origin your_fork_url (can be already added) 4) git fetch origin 5) git remote add upstream git@github.com:qaprosoft/carina.git 6) git fetch upstream 7) git checkout -b work_local_branch upstream/master And then, after adding the files ( git add ...), use git commit (add description) and then push : git push origin work_local_branch:work_remote_branch And on https://github.com/qaprosoft/carina you will see the possibility to \"Compare Pull Request\"","title":"Contribution"},{"location":"databases/","text":"Database usage Here is a simple DB schema that will be used for this sample: We will implement mapping for Users and UserPreferences tables. Dependencies For integration with DB, we recommend to use MyBatis ORM framework. MyBatis is a first class persistence framework with support for custom SQL, stored procedures and advanced mappings. To start with, let's add the required dependencies into Maven pom.xml: dependency groupId org.mybatis /groupId artifactId mybatis /artifactId version 3.5.2 /version /dependency !-- Postgres driver -- dependency groupId org.postgresql /groupId artifactId postgresql /artifactId version 42.2.6 /version /dependency !-- MySQL driver -- dependency groupId mysql /groupId artifactId mysql-connector-java /artifactId version 8.0.17 /version /dependency Mappers The next step is MyBatis mappers implementation, read the official documentation to understand all the details. Let's place all the mappers into src/main/resources/mappers . Here is a UserMapper.xml sample: ?xml version= 1.0 encoding= UTF-8 ? !DOCTYPE mapper PUBLIC -//mybatis.org//DTD Mapper 3.0//EN http://mybatis.org/dtd/mybatis-3-mapper.dtd mapper namespace= com.qaprosoft.carina.demo.db.mappers.UserMapper insert id= create useGeneratedKeys= true keyProperty= id ![CDATA[ INSERT INTO carina.USERS (USERNAME, PASSWORD, FIRST_NAME, LAST_NAME, EMAIL, STATUS) VALUES ( #{username}, #{password}, #{firstName}, #{lastName}, #{email}, #{status} ) ]] /insert sql id= getUser ![CDATA[ SELECT U.ID AS USER_ID, U.USERNAME AS USER_USERNAME, U.PASSWORD AS USER_PASSWORD, U.FIRST_NAME AS USER_FIRST_NAME, U.LAST_NAME AS USER_LAST_NAME, U.EMAIL AS USER_EMAIL, U.STATUS AS USER_STATUS, UP.ID AS USER_PREFERENCE_ID, UP.NAME AS USER_PREFERENCE_NAME, UP.VALUE AS USER_PREFERENCE_VALUE, UP.USER_ID AS USER_PREFERENCE_USER_ID FROM carina.USERS U LEFT JOIN carina.USER_PREFERENCES UP ON UP.USER_ID = U.ID ]] /sql select id= findById resultMap= UserResultMap include refid= getUser / ![CDATA[ WHERE U.ID = #{id}; ]] /select select id= findByUserName resultMap= UserResultMap include refid= getUser / ![CDATA[ WHERE U.USERNAME = #{username}; ]] /select update id= update ![CDATA[ UPDATE carina.USERS ]] set if test= null != firstName ![CDATA[ FIRST_NAME = #{firstName}, ]] /if if test= null != lastName ![CDATA[ LAST_NAME = #{lastName}, ]] /if if test= null != email ![CDATA[ EMAIL = #{email}, ]] /if if test= null != username ![CDATA[ USERNAME = #{username}, ]] /if if test= null != password ![CDATA[ PASSWORD = #{password}, ]] /if /set ![CDATA[ WHERE ID = #{id} ]] /update delete id= delete ![CDATA[ DELETE FROM carina.USERS WHERE ID = #{id} ]] /delete resultMap type= com.qaprosoft.carina.demo.db.models.User id= UserResultMap autoMapping= false id column= USER_ID property= id / result column= USER_USERNAME property= username / result column= USER_PASSWORD property= password / result column= USER_FIRST_NAME property= firstName / result column= USER_LAST_NAME property= lastName / result column= USER_EMAIL property= email / result column= USER_STATUS property= status / collection property= preferences ofType= com.qaprosoft.carina.demo.db.models.UserPreference resultMap= com.qaprosoft.carina.demo.db.mappers.UserPreferenceMapper.UserPreferenceResultMap / /resultMap /mapper Now we have to implement a DB domain object User class which reflects the DB table structure: package com.qaprosoft.carina.demo.db.models; import java.util.ArrayList; import java.util.List; public class User { private Long id; private String username; private String password; private String email; private String firstName; private String lastName; private Status status; private List UserPreference preferences = new ArrayList (); public User() { } public enum Status { ACTIVE, INACTIVE } public Long getId() { return id; } public void setId(Long id) { this.id = id; } public String getUsername() { return username; } public void setUsername(String username) { this.username = username; } public String getPassword() { return password; } public void setPassword(String password) { this.password = password; } public String getEmail() { return email; } public void setEmail(String email) { this.email = email; } public String getFirstName() { return firstName; } public void setFirstName(String firstName) { this.firstName = firstName; } public String getLastName() { return lastName; } public void setLastName(String lastName) { this.lastName = lastName; } public List UserPreference getPreferences() { return preferences; } public void setPreferences(List UserPreference preferences) { this.preferences = preferences; } public Status getStatus() { return status; } public void setStatus(Status status) { this.status = status; } } Also, we have to describe the mapper interface, UserMapper interface : package com.qaprosoft.carina.demo.db.mappers; import com.qaprosoft.carina.demo.db.models.User; public interface UserMapper { void create(User user); User findById(long id); User findByUserName(String username); void update(User user); void delete(User user); } Configuration First of all, we need to place DB credentials into src/main/resources/_database.properties : #===============================================================# #================== Database configuration ====================# #===============================================================# db.url=jdbc:postgresql://localhost:5432/postgres db.driver=org.postgresql.Driver db.user=postgres db.pass=postgres #db.url=jdbc:mysql://localhost:3306/mysql #db.driver=com.mysql.jdbc.Driver #db.user=mysql #db.pass=mysql All the mappers and the reference to _database.properties should be specified in src/main/resources/mybatis-config.xml : ?xml version= 1.0 encoding= UTF-8 ? !DOCTYPE configuration PUBLIC -//mybatis.org//DTD Config 3.0//EN http://mybatis.org/dtd/mybatis-3-config.dtd configuration properties resource= _database.properties / environments default= development environment id= development transactionManager type= JDBC / dataSource type= POOLED property name= driver value= ${db.driver} / property name= url value= ${db.url} / property name= username value= ${db.user} / property name= password value= ${db.pass} / /dataSource /environment /environments mappers mapper resource= mappers/UserMapper.xml / mapper resource= mappers/UserPreferenceMapper.xml / /mappers /configuration Connection factory Connection factory is responsible for MyBatis context initialization and creation of mapper instances, take a look at the sample implementation of ConnectionFactory : package com.qaprosoft.carina.demo.utils; import java.io.IOException; import java.io.Reader; import org.apache.ibatis.io.Resources; import org.apache.ibatis.session.SqlSessionFactory; import org.apache.ibatis.session.SqlSessionFactoryBuilder; import com.qaprosoft.carina.demo.db.mappers.UserMapper; import com.qaprosoft.carina.demo.db.mappers.UserPreferenceMapper; public class ConnectionFactory { private static SqlSessionFactory factory; static { Reader reader = null; try { reader = Resources.getResourceAsReader( mybatis-config.xml ); } catch (IOException e) { throw new RuntimeException(e.getMessage()); } factory = new SqlSessionFactoryBuilder().build(reader); } public static SqlSessionFactory getSqlSessionFactory() { return factory; } public static UserMapper getUserMapper() { return ConnectionFactory.getSqlSessionFactory().openSession(true).getMapper(UserMapper.class); } public static UserPreferenceMapper getUserPreferenceMapperMapper() { return ConnectionFactory.getSqlSessionFactory().openSession(true).getMapper(UserPreferenceMapper.class); } } Usage sample Finally, DBSampleTest illustrates the usage of MyBatis in tests: package com.qaprosoft.carina.demo; import static org.testng.Assert.assertEquals; import static org.testng.Assert.assertNull; import org.apache.ibatis.session.SqlSession; import org.testng.annotations.Test; import com.qaprosoft.carina.core.foundation.AbstractTest; import com.qaprosoft.carina.demo.db.mappers.UserMapper; import com.qaprosoft.carina.demo.db.mappers.UserPreferenceMapper; import com.qaprosoft.carina.demo.db.models.User; import com.qaprosoft.carina.demo.db.models.User.Status; import com.qaprosoft.carina.demo.utils.ConnectionFactory; import com.qaprosoft.carina.demo.db.models.UserPreference; /** * This sample shows how create DB test. * * @author qpsdemo */ public class DBSampleTest extends AbstractTest { ... @Test public void createUser() { try (SqlSession session = ConnectionFactory.getSqlSessionFactory().openSession(true)) { UserMapper userMapper = session.getMapper(UserMapper.class); userMapper.create(USER); checkUser(userMapper.findById(USER.getId())); } } @Test(dependsOnMethods = createUser ) public void createUserPreference() { try (SqlSession session = ConnectionFactory.getSqlSessionFactory().openSession(true)) { UserMapper userMapper = session.getMapper(UserMapper.class); UserPreferenceMapper userPreferenceMapper = session.getMapper(UserPreferenceMapper.class); USER_PREFERENCE.setUserId(USER.getId()); userPreferenceMapper.create(USER_PREFERENCE); checkUserPreference(userMapper.findById(USER.getId()).getPreferences().get(0)); } } ... }","title":"Database usage"},{"location":"databases/#database-usage","text":"Here is a simple DB schema that will be used for this sample: We will implement mapping for Users and UserPreferences tables.","title":"Database usage"},{"location":"databases/#dependencies","text":"For integration with DB, we recommend to use MyBatis ORM framework. MyBatis is a first class persistence framework with support for custom SQL, stored procedures and advanced mappings. To start with, let's add the required dependencies into Maven pom.xml: dependency groupId org.mybatis /groupId artifactId mybatis /artifactId version 3.5.2 /version /dependency !-- Postgres driver -- dependency groupId org.postgresql /groupId artifactId postgresql /artifactId version 42.2.6 /version /dependency !-- MySQL driver -- dependency groupId mysql /groupId artifactId mysql-connector-java /artifactId version 8.0.17 /version /dependency","title":"Dependencies"},{"location":"databases/#mappers","text":"The next step is MyBatis mappers implementation, read the official documentation to understand all the details. Let's place all the mappers into src/main/resources/mappers . Here is a UserMapper.xml sample: ?xml version= 1.0 encoding= UTF-8 ? !DOCTYPE mapper PUBLIC -//mybatis.org//DTD Mapper 3.0//EN http://mybatis.org/dtd/mybatis-3-mapper.dtd mapper namespace= com.qaprosoft.carina.demo.db.mappers.UserMapper insert id= create useGeneratedKeys= true keyProperty= id ![CDATA[ INSERT INTO carina.USERS (USERNAME, PASSWORD, FIRST_NAME, LAST_NAME, EMAIL, STATUS) VALUES ( #{username}, #{password}, #{firstName}, #{lastName}, #{email}, #{status} ) ]] /insert sql id= getUser ![CDATA[ SELECT U.ID AS USER_ID, U.USERNAME AS USER_USERNAME, U.PASSWORD AS USER_PASSWORD, U.FIRST_NAME AS USER_FIRST_NAME, U.LAST_NAME AS USER_LAST_NAME, U.EMAIL AS USER_EMAIL, U.STATUS AS USER_STATUS, UP.ID AS USER_PREFERENCE_ID, UP.NAME AS USER_PREFERENCE_NAME, UP.VALUE AS USER_PREFERENCE_VALUE, UP.USER_ID AS USER_PREFERENCE_USER_ID FROM carina.USERS U LEFT JOIN carina.USER_PREFERENCES UP ON UP.USER_ID = U.ID ]] /sql select id= findById resultMap= UserResultMap include refid= getUser / ![CDATA[ WHERE U.ID = #{id}; ]] /select select id= findByUserName resultMap= UserResultMap include refid= getUser / ![CDATA[ WHERE U.USERNAME = #{username}; ]] /select update id= update ![CDATA[ UPDATE carina.USERS ]] set if test= null != firstName ![CDATA[ FIRST_NAME = #{firstName}, ]] /if if test= null != lastName ![CDATA[ LAST_NAME = #{lastName}, ]] /if if test= null != email ![CDATA[ EMAIL = #{email}, ]] /if if test= null != username ![CDATA[ USERNAME = #{username}, ]] /if if test= null != password ![CDATA[ PASSWORD = #{password}, ]] /if /set ![CDATA[ WHERE ID = #{id} ]] /update delete id= delete ![CDATA[ DELETE FROM carina.USERS WHERE ID = #{id} ]] /delete resultMap type= com.qaprosoft.carina.demo.db.models.User id= UserResultMap autoMapping= false id column= USER_ID property= id / result column= USER_USERNAME property= username / result column= USER_PASSWORD property= password / result column= USER_FIRST_NAME property= firstName / result column= USER_LAST_NAME property= lastName / result column= USER_EMAIL property= email / result column= USER_STATUS property= status / collection property= preferences ofType= com.qaprosoft.carina.demo.db.models.UserPreference resultMap= com.qaprosoft.carina.demo.db.mappers.UserPreferenceMapper.UserPreferenceResultMap / /resultMap /mapper Now we have to implement a DB domain object User class which reflects the DB table structure: package com.qaprosoft.carina.demo.db.models; import java.util.ArrayList; import java.util.List; public class User { private Long id; private String username; private String password; private String email; private String firstName; private String lastName; private Status status; private List UserPreference preferences = new ArrayList (); public User() { } public enum Status { ACTIVE, INACTIVE } public Long getId() { return id; } public void setId(Long id) { this.id = id; } public String getUsername() { return username; } public void setUsername(String username) { this.username = username; } public String getPassword() { return password; } public void setPassword(String password) { this.password = password; } public String getEmail() { return email; } public void setEmail(String email) { this.email = email; } public String getFirstName() { return firstName; } public void setFirstName(String firstName) { this.firstName = firstName; } public String getLastName() { return lastName; } public void setLastName(String lastName) { this.lastName = lastName; } public List UserPreference getPreferences() { return preferences; } public void setPreferences(List UserPreference preferences) { this.preferences = preferences; } public Status getStatus() { return status; } public void setStatus(Status status) { this.status = status; } } Also, we have to describe the mapper interface, UserMapper interface : package com.qaprosoft.carina.demo.db.mappers; import com.qaprosoft.carina.demo.db.models.User; public interface UserMapper { void create(User user); User findById(long id); User findByUserName(String username); void update(User user); void delete(User user); }","title":"Mappers"},{"location":"databases/#configuration","text":"First of all, we need to place DB credentials into src/main/resources/_database.properties : #===============================================================# #================== Database configuration ====================# #===============================================================# db.url=jdbc:postgresql://localhost:5432/postgres db.driver=org.postgresql.Driver db.user=postgres db.pass=postgres #db.url=jdbc:mysql://localhost:3306/mysql #db.driver=com.mysql.jdbc.Driver #db.user=mysql #db.pass=mysql All the mappers and the reference to _database.properties should be specified in src/main/resources/mybatis-config.xml : ?xml version= 1.0 encoding= UTF-8 ? !DOCTYPE configuration PUBLIC -//mybatis.org//DTD Config 3.0//EN http://mybatis.org/dtd/mybatis-3-config.dtd configuration properties resource= _database.properties / environments default= development environment id= development transactionManager type= JDBC / dataSource type= POOLED property name= driver value= ${db.driver} / property name= url value= ${db.url} / property name= username value= ${db.user} / property name= password value= ${db.pass} / /dataSource /environment /environments mappers mapper resource= mappers/UserMapper.xml / mapper resource= mappers/UserPreferenceMapper.xml / /mappers /configuration","title":"Configuration"},{"location":"databases/#connection-factory","text":"Connection factory is responsible for MyBatis context initialization and creation of mapper instances, take a look at the sample implementation of ConnectionFactory : package com.qaprosoft.carina.demo.utils; import java.io.IOException; import java.io.Reader; import org.apache.ibatis.io.Resources; import org.apache.ibatis.session.SqlSessionFactory; import org.apache.ibatis.session.SqlSessionFactoryBuilder; import com.qaprosoft.carina.demo.db.mappers.UserMapper; import com.qaprosoft.carina.demo.db.mappers.UserPreferenceMapper; public class ConnectionFactory { private static SqlSessionFactory factory; static { Reader reader = null; try { reader = Resources.getResourceAsReader( mybatis-config.xml ); } catch (IOException e) { throw new RuntimeException(e.getMessage()); } factory = new SqlSessionFactoryBuilder().build(reader); } public static SqlSessionFactory getSqlSessionFactory() { return factory; } public static UserMapper getUserMapper() { return ConnectionFactory.getSqlSessionFactory().openSession(true).getMapper(UserMapper.class); } public static UserPreferenceMapper getUserPreferenceMapperMapper() { return ConnectionFactory.getSqlSessionFactory().openSession(true).getMapper(UserPreferenceMapper.class); } }","title":"Connection factory"},{"location":"databases/#usage-sample","text":"Finally, DBSampleTest illustrates the usage of MyBatis in tests: package com.qaprosoft.carina.demo; import static org.testng.Assert.assertEquals; import static org.testng.Assert.assertNull; import org.apache.ibatis.session.SqlSession; import org.testng.annotations.Test; import com.qaprosoft.carina.core.foundation.AbstractTest; import com.qaprosoft.carina.demo.db.mappers.UserMapper; import com.qaprosoft.carina.demo.db.mappers.UserPreferenceMapper; import com.qaprosoft.carina.demo.db.models.User; import com.qaprosoft.carina.demo.db.models.User.Status; import com.qaprosoft.carina.demo.utils.ConnectionFactory; import com.qaprosoft.carina.demo.db.models.UserPreference; /** * This sample shows how create DB test. * * @author qpsdemo */ public class DBSampleTest extends AbstractTest { ... @Test public void createUser() { try (SqlSession session = ConnectionFactory.getSqlSessionFactory().openSession(true)) { UserMapper userMapper = session.getMapper(UserMapper.class); userMapper.create(USER); checkUser(userMapper.findById(USER.getId())); } } @Test(dependsOnMethods = createUser ) public void createUserPreference() { try (SqlSession session = ConnectionFactory.getSqlSessionFactory().openSession(true)) { UserMapper userMapper = session.getMapper(UserMapper.class); UserPreferenceMapper userPreferenceMapper = session.getMapper(UserPreferenceMapper.class); USER_PREFERENCE.setUserId(USER.getId()); userPreferenceMapper.create(USER_PREFERENCE); checkUserPreference(userMapper.findById(USER.getId()).getPreferences().get(0)); } } ... }","title":"Usage sample"},{"location":"dataproviders/","text":"Dataproviders Modern test automation frameworks should support data-driven testing, when you are capable to verify a variety of edge cases providing test data sets into the tests using external data sources. Carina is not an exception, the framework supports multiple ways of tests parametrization (see the samples ): Java data-providers XML parametrization XLS data-providers CSV data-providers Java data-provider As far as Carina is based on TestNG framework, you are able to use well known Java data-providers which return a matrix of Objects and pass it to the appropriate test arguments. You have to use dataProvider attribute along with @Test annotation and implement the method annotated with @DataProvider that will return Object[][] as a test data set: @Test(dataProvider = DP1 ) public void testMuliplyOperation(int a, int b, int c) { int actual = a * b; int expected = c; Assert.assertEquals(actual, expected, Invalid sum result! ); } @DataProvider(parallel = false, name = DP1 ) public static Object[][] dataprovider() { return new Object[][] { { 2, 3, 6 }, { 6, 6, 36 }, { 5, 8, 40 } }; } XML parametrization TestNG supports parametrization from XML files, when you organize test suites using XML files. A parameterized test method should be annotated with @Parameters({ \"a\", \"b\", \"c\" }) and the appropriate method arguments should be listed. Also, you have to pass all the required parameters from an XML suite file: @Test @Parameters({ a , b , c }) public void testSubstractOperation(int a, int b, int c) { int actual = Integer.valueOf(a) - Integer.valueOf(b); int expected = Integer.valueOf(c); Assert.assertEquals(actual, expected, Invalid substract result! ); } ... test name= Substract operation test parameter name= a value= 12 / parameter name= b value= 3 / parameter name= c value= 9 / classes class name= com.qaprosoft.carina.demo.DataprovidersSampleTest methods include name= testSubstractOperation / /methods /class /classes /test ... XLS/CSV data-providers Carina test framework provides the possibility to write all the tests with data providers in one place including parametrization, using external XLS/CSV spreadsheets. First of all, you need to declare the test class that extends AbstractTest.java : After that, you can specify the data provider tests as follows. public class DataprovidersSampleTest extends AbstractTest { @Test(dataProvider = DataProvider ) @XlsDataSourceParameters(path = xls/demo.xlsx , sheet = Calculator , dsUid = TUID , dsArgs = a,b,c ) public void testSumOperation(String a, String b, String c) { int actual = Integer.valueOf(a) + Integer.valueOf(b); int expected = Integer.valueOf(c); Assert.assertEquals(actual, expected, Invalid sum result! ); } } This test uses XLS/CSV files as the data source. Every row in a spreadsheet is a set of arguments for a test. You should specify the dataProvider parameter for TestNG annotation @Test . Carina test framework initially defines several data provider methods in AbstractTest.java , which you've extended earlier: createData method (data provider name = \"DataProvider\") for common use cases createDataSingeThread method (data provider name = \"SingleDataProvider\") for a single-thread execution. To specify the XLS/CSV spreadsheets for a test, you should declare @XlsDataSourceParameters annotation and define its parameters: path - file path located in src/test/resources sheet - sheet name dsUid - data-source unique identifier dsArgs - column names from the sheet Here you can look at the spreadsheet as a data provider example for your further tests: In the TUID column you should specify some unique test identifier that will be set at the beginning of the test name in the test results report. In the next columns you can specify the arguments for a test and their values in the bottom lines. They will be used as parameters in @XlsDataSourceParameters . In this example, the values of a, b, c arguments were defined in 3 sets of values with different TUID. DataProvider with huge number of columns In some cases, we have to provide 10+ columns into the test. In this case, there is one tricky point. Just removing dsArgs dataprovider parameter will collect all the rows into the single HashMap object, so you can dynamically get any column in the test using the column name. public class DataprovidersSampleTest extends AbstractTest { @Test(dataProvider = DataProvider ) @XlsDataSourceParameters(path = xls/demo.xlsx , sheet = Calculator , dsUid = TUID ) public void testSumOperation(HashMap String, String args) { int actual = Integer.valueOf(args.get( a )) + Integer.valueOf(args.get( b )); int expected = Integer.valueOf(args.get( c )); Assert.assertEquals(actual, expected, Invalid sum result! ); } }","title":"Dataproviders"},{"location":"dataproviders/#dataproviders","text":"Modern test automation frameworks should support data-driven testing, when you are capable to verify a variety of edge cases providing test data sets into the tests using external data sources. Carina is not an exception, the framework supports multiple ways of tests parametrization (see the samples ): Java data-providers XML parametrization XLS data-providers CSV data-providers","title":"Dataproviders"},{"location":"dataproviders/#java-data-provider","text":"As far as Carina is based on TestNG framework, you are able to use well known Java data-providers which return a matrix of Objects and pass it to the appropriate test arguments. You have to use dataProvider attribute along with @Test annotation and implement the method annotated with @DataProvider that will return Object[][] as a test data set: @Test(dataProvider = DP1 ) public void testMuliplyOperation(int a, int b, int c) { int actual = a * b; int expected = c; Assert.assertEquals(actual, expected, Invalid sum result! ); } @DataProvider(parallel = false, name = DP1 ) public static Object[][] dataprovider() { return new Object[][] { { 2, 3, 6 }, { 6, 6, 36 }, { 5, 8, 40 } }; }","title":"Java data-provider"},{"location":"dataproviders/#xml-parametrization","text":"TestNG supports parametrization from XML files, when you organize test suites using XML files. A parameterized test method should be annotated with @Parameters({ \"a\", \"b\", \"c\" }) and the appropriate method arguments should be listed. Also, you have to pass all the required parameters from an XML suite file: @Test @Parameters({ a , b , c }) public void testSubstractOperation(int a, int b, int c) { int actual = Integer.valueOf(a) - Integer.valueOf(b); int expected = Integer.valueOf(c); Assert.assertEquals(actual, expected, Invalid substract result! ); } ... test name= Substract operation test parameter name= a value= 12 / parameter name= b value= 3 / parameter name= c value= 9 / classes class name= com.qaprosoft.carina.demo.DataprovidersSampleTest methods include name= testSubstractOperation / /methods /class /classes /test ...","title":"XML parametrization"},{"location":"dataproviders/#xlscsv-data-providers","text":"Carina test framework provides the possibility to write all the tests with data providers in one place including parametrization, using external XLS/CSV spreadsheets. First of all, you need to declare the test class that extends AbstractTest.java : After that, you can specify the data provider tests as follows. public class DataprovidersSampleTest extends AbstractTest { @Test(dataProvider = DataProvider ) @XlsDataSourceParameters(path = xls/demo.xlsx , sheet = Calculator , dsUid = TUID , dsArgs = a,b,c ) public void testSumOperation(String a, String b, String c) { int actual = Integer.valueOf(a) + Integer.valueOf(b); int expected = Integer.valueOf(c); Assert.assertEquals(actual, expected, Invalid sum result! ); } } This test uses XLS/CSV files as the data source. Every row in a spreadsheet is a set of arguments for a test. You should specify the dataProvider parameter for TestNG annotation @Test . Carina test framework initially defines several data provider methods in AbstractTest.java , which you've extended earlier: createData method (data provider name = \"DataProvider\") for common use cases createDataSingeThread method (data provider name = \"SingleDataProvider\") for a single-thread execution. To specify the XLS/CSV spreadsheets for a test, you should declare @XlsDataSourceParameters annotation and define its parameters: path - file path located in src/test/resources sheet - sheet name dsUid - data-source unique identifier dsArgs - column names from the sheet Here you can look at the spreadsheet as a data provider example for your further tests: In the TUID column you should specify some unique test identifier that will be set at the beginning of the test name in the test results report. In the next columns you can specify the arguments for a test and their values in the bottom lines. They will be used as parameters in @XlsDataSourceParameters . In this example, the values of a, b, c arguments were defined in 3 sets of values with different TUID.","title":"XLS/CSV data-providers"},{"location":"dataproviders/#dataprovider-with-huge-number-of-columns","text":"In some cases, we have to provide 10+ columns into the test. In this case, there is one tricky point. Just removing dsArgs dataprovider parameter will collect all the rows into the single HashMap object, so you can dynamically get any column in the test using the column name. public class DataprovidersSampleTest extends AbstractTest { @Test(dataProvider = DataProvider ) @XlsDataSourceParameters(path = xls/demo.xlsx , sheet = Calculator , dsUid = TUID ) public void testSumOperation(HashMap String, String args) { int actual = Integer.valueOf(args.get( a )) + Integer.valueOf(args.get( b )); int expected = Integer.valueOf(args.get( c )); Assert.assertEquals(actual, expected, Invalid sum result! ); } }","title":"DataProvider with huge number of columns"},{"location":"execution/","text":"Selenium server Before running any web test, you have to start Selenium server locally or use a remote Selenium server. You may download the latest version of Selenium standalone server on the official website along with a browser binary for Chrome, Firefox, IE, etc. For running a test with Chrome browser, you will need to download chromedriver and place it along with selenium-standalone-server-X.jar and execute (make sure that you replace 'X' by the current Selenium version): java -jar -Dwebdriver.chrome.driver=./chromedriver selenium-server-standalone-X.jar You have several options to run Selenium in Docker , the easiest way is to create docker-compose.yml: # To execute this docker-compose yml file, use docker-compose -f file_name up # Add the -d flag at the end for deattached execution version: '2' services: firefox: image: selenium/node-firefox:3.11.0-californium volumes: - /dev/shm:/dev/shm depends_on: - hub environment: HUB_HOST: hub chrome: image: selenium/node-chrome:3.11.0-californium volumes: - /dev/shm:/dev/shm depends_on: - hub environment: HUB_HOST: hub hub: image: selenium/hub:3.11.0-californium ports: - 4444:4444 Now you may start Selenium, running the following command in terminal: docker-compose up Running tests There are several options to execute a test: you may run test suite from Eclipse IDE or initiate test execution from the console using Maven Surefire plugin built into Carina framework. To run test suite from Eclipse IDE, just select the required TestNG xml file: Right click Run As TestNG suite To run the same test suite from the console, navigate to the test project root (where pom.xml is located) and execute the following command: mvn clean -Dsuite=api test","title":"Execution"},{"location":"execution/#selenium-server","text":"Before running any web test, you have to start Selenium server locally or use a remote Selenium server. You may download the latest version of Selenium standalone server on the official website along with a browser binary for Chrome, Firefox, IE, etc. For running a test with Chrome browser, you will need to download chromedriver and place it along with selenium-standalone-server-X.jar and execute (make sure that you replace 'X' by the current Selenium version): java -jar -Dwebdriver.chrome.driver=./chromedriver selenium-server-standalone-X.jar You have several options to run Selenium in Docker , the easiest way is to create docker-compose.yml: # To execute this docker-compose yml file, use docker-compose -f file_name up # Add the -d flag at the end for deattached execution version: '2' services: firefox: image: selenium/node-firefox:3.11.0-californium volumes: - /dev/shm:/dev/shm depends_on: - hub environment: HUB_HOST: hub chrome: image: selenium/node-chrome:3.11.0-californium volumes: - /dev/shm:/dev/shm depends_on: - hub environment: HUB_HOST: hub hub: image: selenium/hub:3.11.0-californium ports: - 4444:4444 Now you may start Selenium, running the following command in terminal: docker-compose up","title":"Selenium server"},{"location":"execution/#running-tests","text":"There are several options to execute a test: you may run test suite from Eclipse IDE or initiate test execution from the console using Maven Surefire plugin built into Carina framework. To run test suite from Eclipse IDE, just select the required TestNG xml file: Right click Run As TestNG suite To run the same test suite from the console, navigate to the test project root (where pom.xml is located) and execute the following command: mvn clean -Dsuite=api test","title":"Running tests"},{"location":"getting_started/","text":"Install and configure JDK 1.8+ Install and configure Apache Maven 3.5.2+ Download and start the latest Selenium standalone server Download the latest version of Eclipse and install TestNG plugin Generating project The easiest way to initialize a new project is to use Carina archetype, you will get a correct project structure along with test samples: mvn archetype:generate -DarchetypeGroupId=com.qaprosoft \\ -DarchetypeArtifactId=carina-archetype \\ -DarchetypeVersion=RELEASE \\ -DgroupId= your_groupId \\ -DartifactId= your_artifactId \\ -Dname= you_proj_name \\ -Durl= your_proj_url \\ -Dversion= your_proj_version If any attribute contains spaces, it should be set in quotes (e.g.: -Dname=\"Hello World\"). In the above Maven command you need to specify 5 attributes, while the first 3 should be left unchanged. Let's go through these attributes: Attribute Meaning Example -DgroupId Company domain in reverse order com.qaprosoft -DartifactId Java project name carina-qa -Dname Name with more details \"Carina Test Automation\" -Durl Company URL http://qaprosoft.com -Dversion Project version 1.0 Import to Eclipse If the generation is successfully complete, you will see a new project folder with a name equal to the artifactId attribute specified during the generation, so navigate to this folder (where pom.xml is located) and execute the following Maven task: mvn clean eclipse:eclipse By executing this command, Maven should resolve all dependencies, downloading the required libraries to your local repository and generating the Eclipse classpath. Before importing a new project to Eclipse, you should link your IDE to your Maven repository by executing the following task: mvn -Dworkspace= path_to_workspace eclipse:configure-workspace Here you need to specify the absolute path to the Eclipse workspace. After that, restart Eclipse IDE. Now you can import generated projects such as \"Existing Java Project\" into Eclipse IDE.","title":"Getting started"},{"location":"getting_started/#generating-project","text":"The easiest way to initialize a new project is to use Carina archetype, you will get a correct project structure along with test samples: mvn archetype:generate -DarchetypeGroupId=com.qaprosoft \\ -DarchetypeArtifactId=carina-archetype \\ -DarchetypeVersion=RELEASE \\ -DgroupId= your_groupId \\ -DartifactId= your_artifactId \\ -Dname= you_proj_name \\ -Durl= your_proj_url \\ -Dversion= your_proj_version If any attribute contains spaces, it should be set in quotes (e.g.: -Dname=\"Hello World\"). In the above Maven command you need to specify 5 attributes, while the first 3 should be left unchanged. Let's go through these attributes: Attribute Meaning Example -DgroupId Company domain in reverse order com.qaprosoft -DartifactId Java project name carina-qa -Dname Name with more details \"Carina Test Automation\" -Durl Company URL http://qaprosoft.com -Dversion Project version 1.0","title":"Generating project"},{"location":"getting_started/#import-to-eclipse","text":"If the generation is successfully complete, you will see a new project folder with a name equal to the artifactId attribute specified during the generation, so navigate to this folder (where pom.xml is located) and execute the following Maven task: mvn clean eclipse:eclipse By executing this command, Maven should resolve all dependencies, downloading the required libraries to your local repository and generating the Eclipse classpath. Before importing a new project to Eclipse, you should link your IDE to your Maven repository by executing the following task: mvn -Dworkspace= path_to_workspace eclipse:configure-workspace Here you need to specify the absolute path to the Eclipse workspace. After that, restart Eclipse IDE. Now you can import generated projects such as \"Existing Java Project\" into Eclipse IDE.","title":"Import to Eclipse"},{"location":"migration/","text":"Migration steps from 5.3.3.xx to 6.0.x carina Due to the architectural changes, code cleanup, etc., 6.0 carina-core generation is not compatible with 5.3 anymore. Visit Release Notes for details. 1) Listeners Updates AnnotationTransformer is a part of CarinaListener, so it should be removed from all TestNG suites and pom.xml files: // remove below lines from each TestNG suites and pom.xml files listeners listener class-name= com.qaprosoft.carina.core.foundation.retry.AnnotationTransformer / /listeners HealthCheckListener is a part of CarinaListener, so it should be removed from TestNG suites and pom.xml files: // remove below lines from each TestNG suites and pom.xml files listeners listener class-name= com.qaprosoft.carina.core.foundation.listeners.HealthCheckListener / /listeners 2) Apache Maven plugins upgrade all plugins have been upgraded on a core level, and we recommend to bump up the below mentioned plugins to the newest versions on project levels as well: maven-compiler-plugin 3.2 - 3.8.0 maven-surefire-plugin 2.18.1 - 2.22.1 3) DriverPool has been refactored and is delivered as IDriverPool interface with default functionality No changes on a test classes level if they extend AbstractTest For every services layer which used static DriverPool functionality we should: // add implements IDriverPool for each service class public class TestService implements IDriverPool { ... //WebDriver drv = DriverPool.getDriver(); // change to WebDriver drv = getDriver(); 4) Cucumber functionality has been completely removed in 6.0, so just remove all dependent classes if any. Inform carina-support if you want to restore cucumber module in Carina. 5) All TestRail updaters, interfaces, etc. have been removed. Carina can't push the data to 3rd party Reporting Tools at runtime. Carina can register only TestRail related tags in Zafira. Integration has been moved to the qps-pipeline level which is much easier to develop, maintain and support. 6) DriverHelper (AbstractPage) - deprecated methods' removal click, type, hover, select, etc. ExtendedWebElement element; String value = value ; type(element, value); - element.type(value); click(element); - element.click(); hover(element); - element.hover(); isElementPresent(element); - element.isPresent(); or element.isElementPresent(); format(element, dynamic attr ); - element.format( dynamic attr ); Note: all the methods using a new OOP format have been replaced pressEnter() has been removed pressEnter(fileNameLabel); // change to fileNameLabel.sendKeys(Keys.RETURN); waitForElementToBeClickable(...) has been removed waitForElementToBeClickable(element, LONG_TIMEOUT); // change to element.isClickable(LONG_TIMEOUT); 7) CustomTypePageFactory- initPage method has an obligatory driver as the 1st argument. transferring the driver as an argument should resolve invalid calls on services layer when we got \"driver already quit...\" too often return CustomTypePageFactory.initPage(PlayerPageBase.class); // change to return CustomTypePageFactory.initPage(getDriver(), PlayerPageBase.class); 8) Communicate via carina-support to get migration support for free...","title":"Migration Steps"},{"location":"migration/#migration-steps-from-533xx-to-60x-carina","text":"Due to the architectural changes, code cleanup, etc., 6.0 carina-core generation is not compatible with 5.3 anymore. Visit Release Notes for details. 1) Listeners Updates AnnotationTransformer is a part of CarinaListener, so it should be removed from all TestNG suites and pom.xml files: // remove below lines from each TestNG suites and pom.xml files listeners listener class-name= com.qaprosoft.carina.core.foundation.retry.AnnotationTransformer / /listeners HealthCheckListener is a part of CarinaListener, so it should be removed from TestNG suites and pom.xml files: // remove below lines from each TestNG suites and pom.xml files listeners listener class-name= com.qaprosoft.carina.core.foundation.listeners.HealthCheckListener / /listeners 2) Apache Maven plugins upgrade all plugins have been upgraded on a core level, and we recommend to bump up the below mentioned plugins to the newest versions on project levels as well: maven-compiler-plugin 3.2 - 3.8.0 maven-surefire-plugin 2.18.1 - 2.22.1 3) DriverPool has been refactored and is delivered as IDriverPool interface with default functionality No changes on a test classes level if they extend AbstractTest For every services layer which used static DriverPool functionality we should: // add implements IDriverPool for each service class public class TestService implements IDriverPool { ... //WebDriver drv = DriverPool.getDriver(); // change to WebDriver drv = getDriver(); 4) Cucumber functionality has been completely removed in 6.0, so just remove all dependent classes if any. Inform carina-support if you want to restore cucumber module in Carina. 5) All TestRail updaters, interfaces, etc. have been removed. Carina can't push the data to 3rd party Reporting Tools at runtime. Carina can register only TestRail related tags in Zafira. Integration has been moved to the qps-pipeline level which is much easier to develop, maintain and support. 6) DriverHelper (AbstractPage) - deprecated methods' removal click, type, hover, select, etc. ExtendedWebElement element; String value = value ; type(element, value); - element.type(value); click(element); - element.click(); hover(element); - element.hover(); isElementPresent(element); - element.isPresent(); or element.isElementPresent(); format(element, dynamic attr ); - element.format( dynamic attr ); Note: all the methods using a new OOP format have been replaced pressEnter() has been removed pressEnter(fileNameLabel); // change to fileNameLabel.sendKeys(Keys.RETURN); waitForElementToBeClickable(...) has been removed waitForElementToBeClickable(element, LONG_TIMEOUT); // change to element.isClickable(LONG_TIMEOUT); 7) CustomTypePageFactory- initPage method has an obligatory driver as the 1st argument. transferring the driver as an argument should resolve invalid calls on services layer when we got \"driver already quit...\" too often return CustomTypePageFactory.initPage(PlayerPageBase.class); // change to return CustomTypePageFactory.initPage(getDriver(), PlayerPageBase.class); 8) Communicate via carina-support to get migration support for free...","title":"Migration steps from 5.3.3.xx to 6.0.x carina"},{"location":"project_structure/","text":"Carina test project is structured as a standard Maven project: carina-demo |-- pom.xml |-- src/test/java |-- src/test/resources |-- api |-- testng_suites |-- xls |-- src/main/java |-- src/main/resources |-- l18n src/test/java - contains test classes organized using TestNG annotations src/test/resources - contains TestNG xml files, API templates and XLS data providers src/main/java - contains page object classes, API domains and additional utilities src/main/resources - contains l18n bundles, configuration properties files and MyBatis profiles if needed","title":"Project structure"},{"location":"proxy/","text":"Operating with Proxies There is a possibility to send all test traffic via the proxy including the embedded light-weight BrowserMob proxy server. There are several properties available to manage all kinds of proxy usage: proxy_host=NULL proxy_port=NULL proxy_protocols=http,https,ftp proxy_set_to_system=true browsermob_proxy=false browsermob_host=NULL browsermob_disabled_mitm=false browsermob_port=0 Declare proxy_host, proxy_port and proxy_protocols to send all Web and API test traffic via your static network proxy. Also, to enable a proxy for TestNG Java process, proxy_set_to_system must be specifed to true , otherwise only WebDrivers and API clients will be proxied. Note: The above settings are mostly required to get public internet access through corporate proxies. Raising inbuilt proxy-server (BrowserMob) Also, Carina can start the embedded proxy to proxy/view/filter requests/responses. There is an inbuilt library BrowserMobProxy in Carina-proxy module. Below you can find the BrowserMob proxy related parameters in your config.properties file: browsermob_proxy=true browsermob_host=NULL browsermob_disabled_mitm=false browsermob_port=0 With the enabled browsermob_proxy Carina will start the dedicated proxy instance on every test method. browsermob_host=NULL means that Carina automatically detects an IP address and puts it into the capabilities, etc. browsermob_host=myhostname is useful in case of running maven process inside a docker container. Override the hostname to be available from Selenium instance. browsermob_port=0 means that Carina dynamically identifies a free port for a proxy session. browsermob_disabled_mitm is disabled by default. Important! If you have troubles with SSL traffic sniffing, the first thing you should do - change browsermob_disabled_mitm property value! Using proxy-server in Java code: Make sure the driver instance is already started: getDriver(); Note: During the driver startup Carina automatically starts proxy and adjusts browser capabilities to track the desired protocols. To get a proxy instance for the current test/thread, you can call: BrowserMobProxy proxy = ProxyPool.getProxy(); Enable the required Har capture type using: proxy.enableHarCaptureTypes(CaptureType.REQUEST_CONTENT, CaptureType.RESPONSE_CONTENT); There are a lot of possible content types: CaptureType.RESPONSE_COOKIES CaptureType.RESPONSE_HEADERS CaptureType.REQUEST_HEADERS CaptureType.RESPONSE_CONTENT CaptureType.REQUEST_CONTENT ... They all can be set as comma-separated parameters. You may want to save the captured content into a .har file: proxy.newHar(HAR_NAME); //Some testing activity... //Saving har to a file... File file = new File(HAR_NAME + .har ); Assert.assertNotNull(proxy.getHar(), Har is NULL! ); try { proxy.getHar().writeTo(file); } catch (IOException e) { e.printStackTrace(); } Your .har file will be created in the project root folder There are four methods to support request and response interception: addRequestFilter addResponseFilter addFirstHttpFilterFactory addLastHttpFilterFactory To add and configure content filters, look here . Dealing with MITM and installing SSL certificate into your system: For Mac users: Go here and save it as ca-certificate-rsa.cer . Double click creates a file. The next window should appear: After authorization, the certificate will be added into your system certificates, but it's still untrusted: To make it trusted, double click on it. The following window should appear: First, click the drop-down menu and select Always Trust option. Then close the window (a second authorization will be required): Make sure the red cross on your certificate turned into a blue one: Adding ssl certificate into Java keystore: If you are still getting the following exception: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target you may need to set up ca-certificate-rsa.cer into your Java keystore. For Mac and Linux users: sudo keytool -importcert -alias browsermob -file pathToYourCertificateLocation/BrowserMobCertificate.crt -keystore /Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home/jre/lib/security/cacerts You will be asked to enter your Mac profile password and a Java keystore password (by default: changeit).","title":"Proxy"},{"location":"proxy/#operating-with-proxies","text":"There is a possibility to send all test traffic via the proxy including the embedded light-weight BrowserMob proxy server. There are several properties available to manage all kinds of proxy usage: proxy_host=NULL proxy_port=NULL proxy_protocols=http,https,ftp proxy_set_to_system=true browsermob_proxy=false browsermob_host=NULL browsermob_disabled_mitm=false browsermob_port=0 Declare proxy_host, proxy_port and proxy_protocols to send all Web and API test traffic via your static network proxy. Also, to enable a proxy for TestNG Java process, proxy_set_to_system must be specifed to true , otherwise only WebDrivers and API clients will be proxied. Note: The above settings are mostly required to get public internet access through corporate proxies.","title":"Operating with Proxies"},{"location":"proxy/#raising-inbuilt-proxy-server-browsermob","text":"Also, Carina can start the embedded proxy to proxy/view/filter requests/responses. There is an inbuilt library BrowserMobProxy in Carina-proxy module. Below you can find the BrowserMob proxy related parameters in your config.properties file: browsermob_proxy=true browsermob_host=NULL browsermob_disabled_mitm=false browsermob_port=0 With the enabled browsermob_proxy Carina will start the dedicated proxy instance on every test method. browsermob_host=NULL means that Carina automatically detects an IP address and puts it into the capabilities, etc. browsermob_host=myhostname is useful in case of running maven process inside a docker container. Override the hostname to be available from Selenium instance. browsermob_port=0 means that Carina dynamically identifies a free port for a proxy session. browsermob_disabled_mitm is disabled by default. Important! If you have troubles with SSL traffic sniffing, the first thing you should do - change browsermob_disabled_mitm property value!","title":"Raising inbuilt proxy-server (BrowserMob)"},{"location":"proxy/#using-proxy-server-in-java-code","text":"Make sure the driver instance is already started: getDriver(); Note: During the driver startup Carina automatically starts proxy and adjusts browser capabilities to track the desired protocols. To get a proxy instance for the current test/thread, you can call: BrowserMobProxy proxy = ProxyPool.getProxy(); Enable the required Har capture type using: proxy.enableHarCaptureTypes(CaptureType.REQUEST_CONTENT, CaptureType.RESPONSE_CONTENT); There are a lot of possible content types: CaptureType.RESPONSE_COOKIES CaptureType.RESPONSE_HEADERS CaptureType.REQUEST_HEADERS CaptureType.RESPONSE_CONTENT CaptureType.REQUEST_CONTENT ... They all can be set as comma-separated parameters. You may want to save the captured content into a .har file: proxy.newHar(HAR_NAME); //Some testing activity... //Saving har to a file... File file = new File(HAR_NAME + .har ); Assert.assertNotNull(proxy.getHar(), Har is NULL! ); try { proxy.getHar().writeTo(file); } catch (IOException e) { e.printStackTrace(); } Your .har file will be created in the project root folder There are four methods to support request and response interception: addRequestFilter addResponseFilter addFirstHttpFilterFactory addLastHttpFilterFactory To add and configure content filters, look here .","title":"Using proxy-server in Java code:"},{"location":"proxy/#dealing-with-mitm-and-installing-ssl-certificate-into-your-system","text":"","title":"Dealing with MITM and installing SSL certificate into your system:"},{"location":"proxy/#for-mac-users","text":"Go here and save it as ca-certificate-rsa.cer . Double click creates a file. The next window should appear: After authorization, the certificate will be added into your system certificates, but it's still untrusted: To make it trusted, double click on it. The following window should appear: First, click the drop-down menu and select Always Trust option. Then close the window (a second authorization will be required): Make sure the red cross on your certificate turned into a blue one:","title":"For Mac users:"},{"location":"proxy/#adding-ssl-certificate-into-java-keystore","text":"If you are still getting the following exception: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target you may need to set up ca-certificate-rsa.cer into your Java keystore.","title":"Adding ssl certificate into Java keystore:"},{"location":"proxy/#for-mac-and-linux-users","text":"sudo keytool -importcert -alias browsermob -file pathToYourCertificateLocation/BrowserMobCertificate.crt -keystore /Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home/jre/lib/security/cacerts You will be asked to enter your Mac profile password and a Java keystore password (by default: changeit).","title":"For Mac and Linux users:"},{"location":"releases/","text":"Release notes 6.1.25 (2019-07-29) 6.1.25 6.1.24 (2019-07-14) 6.1.24 Starting from now, the release notes will be published only on Github! 6.1.22 (2019-06-29) Enhancements #736 Updated @MethodOwner annotation. secondaryOwner parameter no longer exists, instead of this parameter added platform filter where neccessary: Note: previous single @MethodOwner annotation without platform works as well @MethodOwner(owner = user1 , platform = android ) @MethodOwner(owner = user2 , platform = ios ) #749 Added ability to set custom test data directory name. This functionality is available via ReportContext.setCustomTestDirName(\"customName\") method. #751 provided anonymous access to carina CI jobs #752 Added generation of JavaDoc #754 Renamed browser_locale property to browser_language Note: make sure to update your project _config.properties accordingly to be able to override browser language! Added release and snapshot build job statuses to carina github Fixes Browser resize moved to DesktopFactory only to minimize errors in mobile web tests. Browser window resolution sets according to capabilites.resolution values, otherwise maximizes the window using old functionality. Known Issues N/A [DEPENDENCIES UPDATES] zafira-client 4.0.56 - 4.0.57 Migration Steps Remove all occurrences of secondaryOwner parameter for @MethodOwner annotation. Use platform filter based on the information above instead To complete migration, replace in your _config.properties all occurrences of browser_locale to browser_language 6.1.21 (2019-06-09) Enhancements Added full integration with ZebRunner (Super Fast Test Automation Cloud Solution) Cleaned up Carina archetype in accordance with the latest changes (dependencies, removal of obsolete files, etc.) Released 6.1.21 archetype and updated \"Getting started\" document accordingly Redesigned integration with S3 in scope of #703 reusing valid functionality from ZafiraClient and removing obsolete Amazon properties from config.properties #720 Migrate AndroidUtils and IOSUtils to functional interfaces enhancement: platform independent IMobileUtils- isAppRunning() implemented AndroidService- checkCurrentDeviceFocus() deprecated removed already deprecated executeKeyEvent, pressKeyCode, pressBack, swipeInContainer, waitUntilElementNotPresent from IAndroidUtils Fixes #745 Bump up com.fasterxml.jackson.core:jackson-databind to 2.9.9 bug #744 Upgrade jacoc-maven-plugin to 0.8.4 in carina and carina-archetype #740 Unable to take a screenshot on a test failure bug #731 Rerun failures and logic onTestFailure doesn't work for the tests with dependsOnMethods #727 Unable to deploy fresh documentation using upgraded pipeline to v 4.0 #703 UI dump report for mobile runs should be published to S3 as an artifact bug fixed NPE in type method when null was provided as an argument Known Issues N/A [DEPENDENCIES UPDATES] maven-surefire-plugin 3.0.0-M3 jacoco-maven-plugin 0.8.2 - 0.8.4 jackson-databind 2.8.8 - 2.8.9 6.1.20 (2019-05-17) Enhancements integrated with 4.0.53 Zafira Server and 4.0.56 Zafira Client! Important: Please, don't migrate to this core version without upgrading Zafira Reporting Tool. #715 Bump up to 4.0.56 zafira-client with fixes for dynamic tags registration (#701) #461 Added support for web mobile execution on real devices using embedded QPS-HUB: Chrome, Firefox Also coming soon: Samsung Native browser, Edge, Opera, Opera Mini and Yandex mobile browsers Added localized date and time settings support for Android 9 #722 Deprecated com.qaprosoft.carina.core.foundation.utils.android.Androidutils and com.qaprosoft.carina.core.foundation.utils.ios.IosUtils. Functional IAndroidUtils and IIosUtils added instead #621 Removed CustomTypePageFactory Note: Reuse ICustomTypePageFactory functional interface updating imports and removing static calls Fixes #711 Fixed Maven compiler source and target argument using 1.8 Java for both Hide \"Timer not stopped for operation: ..\" to debug level as it is not so important Known Issues N/A [DEPENDENCIES UPDATES] zafira-client 3.4.55 - 4.0.56 6.0.19 (2019-05-01) Enhancements integrated with 4.0.52 Zafira Server! Important: Please, don't migrate to this core version without upgrading Zafira Reporting Tool. Bump up to 3.4.55 zafira-client which support ZAFIRA_ARTIFACTS_USE_PROXY feature for permanent artifacts storing in AWS S3 Fixes N/A Known Issues N/A [DEPENDENCIES UPDATES] zafira-client 3.4.54 - 3.4.55 6.0.18 (2019-04-15) Enhancements integrated with 3.4.51 Zafira Server! Important: Please, don't migrate to this core version without upgrading Zafira Reporting Tool. Finished with artifacts uploading improvements to S3 including asynchronous uploading Add Google spreadsheet data provider @Test(dataProvider = SingleDataProvider ) @XlsDataSourceParameters( spreadsheetId = 1G.... , sheet = urls , executeValue = TRUE , dsUid = TUID , dsArgs = TUID, ARG1, ARG2 ) public void test(String TUID, String ARG1, String ARG2) added support for mobile web tests execution against QPS-HUB in qps-infra Published howto article about @ExtendedFindBy() usage for mobile elements Fixes N/A Known Issues N/A [DEPENDENCIES UPDATES] maven-surefire-plugin 2.22.1 - 3.0.0-M3 zafira-client 3.3.51 - 3.4.54 6.0.16 (2019-03-15) Enhancements integrated with 3.3.48 Zafira Server! Important: Please, don't migrate to it's core version without upgrading Zafira Reporting Tool. Improved artifacts uploading to amazon S3. Updated existing screenshots capturing with ability to register important screenshots as test artifacts introduced new \"ignore_ssl=false\" property for carina-api module. If enabled api tests ignore handshake exception during tests run Fixes Hopefully permanent fix delivered for a mess with capturing screenshots over the died driver Note: in case of any exception in child thread TestNG crash execution of it's logic and do not execute after methods/classes etc. Our DriverListener is a child thread. #673 Fixed extra places with potential NPE Known Issues N/A [DEPENDENCIES UPDATES] zafira-client 3.3.49 - 3.3.51 6.0.12 (2019-02-25) Enhancements #648 Implement findByImage strategy Added instructions \"How to use Find by image strategy\". Avoid input field clearing for empty control Fixes closing BEFORE_CLASS drivers during \"onFinish(ITestContext context)\" Added extra debug logging messages for FtpUtils to simplify failures debugging declared ARTIFACTS_EXPIRATION_SECONDS as configuration parameter to see it's value in log Known Issues N/A [DEPENDENCIES UPDATES] jackson-databind 2.8.11.3 - 2.9.8 jackson-annotations 2.9.8 6.0.11 (2019-02-05) Enhancements N/A Fixes #652 web video quality property is missed Known Issues N/A [DEPENDENCIES UPDATES] N/A 6.0.10 (2019-01-29) Enhancements #566 Add new parameters for video recording to match appium 1.10 implementation Prepared MobileSampleTest for iOS/Android and internal application in carina-demo Fixes ExtendedWebElement.scrollTo() refactored using up to date Locatable class Known Issues #637 Abnormal behavior when swiping left or right More information requested #652 web video quality property is missed [DEPENDENCIES UPDATES] N/A 6.0.9 (2019-01-22) Enhancements #618 Update appium java client to the latest version (7.0.0) #622 Create Zoom in/out in MobileUtils/IMobileUtils #534 , #563 Improved BrowserMob proxy coverage by unit tests including example for secure traffic sniffer. Take a look for example. Also disabled proxy_set_to_system=false property by default. It should be enabled only if you have to use your internal corporate proxy to have access to internet. #436 , #326 Registering device information for unsuccessful driver start. Available only in scope of https://www.qps-infra.io and https://mobiletesting.farm Note: Appium should be patched to incorporate custom details into the exception (system-calls.js) Fixes #625 AbstractTest doesn't implement ICustomTypePageFactory #629 Annoying INFO message: Value not resolved by key: PRODUCTION.url #636 operations with relative elements in AbstractUiObject are broken #634 do not restart proxy during driver restart on the same device Known Issues #637 Abnormal behavior when swiping left or right [DEPENDENCIES UPDATES] io.appium.java-client 6.1.0 - 7.0.0 6.0.8 (2019-01-15) Enhancements #614 refactor CustomTypePageFactory to interface Note: CustomTypePageFactory.initPage(...) should be replaced by initPage(...) also we again return initPage(...) method without driver as argument CustomTypePageFactory.initPage(...); // it should be replaced in most cases by initPage(...); #608 update copyright info using 2019 #612 Test execution by filter rules. Annotations for future filtering can be set in tests in following way for test method and inside config.properties : @TestPriority(Priority.P1) @MethodOwner(owner = owner ) @TestTag(name = feature , value = reg ) // _config.properties: test_run_rules=PRIORITY= P1 amp; amp;P2;;OWNER= owner;;TAGS= tag1=temp amp; amp;feature=reg rules logic: test_run_rules={RULE_NAME_ENUM}= {RULE_VALUE1} {RULE_VALUE2};;... //Listener should be added in pom.xml or in required suite listener class-name= com.qaprosoft.carina.core.foundation.listeners.FilterTestsListener / Fixes #533 Default url parameter is not detected by envLoader #613 openURL functionality refactoring Improved hasDependencies logic using short and full qualified class/method names Improved negative use-case handlers avoiding loop in making screenshots and generating UiDump Added deprecation javadoc for DriverHelper.tapWithCoordinates(double x, double y) #623 LOGGER is not being recognized correctly in 6.0.7 Known Issues N/A [DEPENDENCIES UPDATES] N/A 6.0.6 (2019-01-07) Enhancements #607 refactor DevicePool logic integrating it completely into DriverPool Note: Due to the removed DevicePool class some code refactoring on project level needed. Mostly for devicePool.getDevice() which is not available anymore: DevicePool.getDevice(); // it should be replaced in most cases by getDevice(); // for the use-case when you need it in static way use IDriverPool.getDefaultDevice(); // Also we have new methods to get device by driver name! getDevice( default ); // return device assigned to default driver getDevice( custom ); //return device addigned to custom driver. // if no driver discovered in the pool with provided name then nullDevice will be returned #610 Declared easy way to control drivers quit on project layer. You can disable core logic with no way to enable it back for current test run. Anyway, Carina will close drivers on suite finish. // Execute as only you would like to disable automatic drivers quit CarinaListener.disableDriversCleanup(); #581 Agreed to avoid drivers keep for depenent groups. In case you need it please disable automatic drivers quit according to the step above and organize quit using your own logic. #599 Upgrade com.fasterxml.jackson.core:jackson-databind to version 2.8.11.3 or later Fixes Fixed potential recursive loops in DriverListener during failures detection #605 review and complete IDriverPool TODO's #609 hide \"Can't save file to Amazon S3!\" error message stack-trace #604 device name for the test is not registered in Zafira #584 DevicePool.getDevice() returns different objects of the same device Known Issues N/A [DEPENDENCIES UPDATES] com.fasterxml.jackson.core: jackson-databind 2.8.11.1- 2.8.11.3 6.0.5 (2019-01-04) Enhancements #565 carina-api: api.validateResponseAgainstJSONSchema should support schema draft 7 Set of improvements into the IDriverPool to make its modification threads safety Start global migration of MobileUtils to IMobileUtils interface Register device information in global driversPool for each driver session Moved drivers quit and devices disconnect onto the java shutdown hook to kill sessions even for aborted tests/jobs Saved information about integrated with STF device in Device object with automatic disconnect on finish Do not show encrypted text in logs (aka user credentials etc) Fixes #590 org.openqa.selenium.remote.RemoteWebDriver cannot be cast to io.appium.java_client.MobileDriver #590 Device type is defined incorrectly in several cases for iOS/Android tests #588 we still can generate ConcurrentModificationException during driver quit operation #574 annoying INFO message in log for specific use-cases #459 Enormous amount of logs appears in console on attempt to use element.clickIfPresent(3) Disabled screenshots capturing for three more driver failures: was terminated due to CLIENT_STOPPED_SESSION Session ID is null. Using WebDriver after calling quit() was terminated due to BROWSER_TIMEOUT Known Issues N/A [DEPENDENCIES UPDATES] N/A 6.0.4 (2018-12-27) Enhancements N/A Fixes #553 6.0: Rebuild failures doesn't work #582 Hardcoded parameters in carina archetype (-Dname and -Durl) Known Issues N/A [DEPENDENCIES UPDATES] zafira-client 3.3.47- 3.3.49 6.0.3 (2018-12-21) Enhancements #570 Updated iDriverPool returning back automatic driver quit onto AfterMethod phase as it was in 5.3.x core. New approach was rejected due to the discovered regressions #567 Added new browsermob_host parameter to override automatically detected IP address for embedded proxy. Updated manual accordingly http://qaprosoft.github.io/carina/proxy #568 Returned Chrome browser maximize to the default method removing old workaround with hardcoded dimension 576 Removed sensitive information from logs during onType and onAttachFile operations #574 Removed invalid log4j appender and hide noisy log messages on startup Adjust custom_capabilities usage allowing not only define it globally but generate for each driver session // start new driver with generated capabilities based on capabilities inside // Samsung_Galaxy_S8.properties property file WebDriver drv = getDriver( name , new CapabilitiesLoader().getCapabilities( browserstack/android/Samsung_Galaxy_S8.properties )) Removed obsolete extra_capabilities configuration parameter Declared Spring Plugins repository in pom.xml to download from scratch monte-repack (javax.media.jai) dependency Known Issues #553 In the integration with Zafira environment rerun failures is still broke [DEPENDENCIES UPDATES] N/A 6.0.2 (2018-12-04) Enhancements Starting from 6.0.x carina-core became a listener with unified CarinaListener class: most of the AbstractTest core methods moved to CarinaListener incorporated HealthCheckListener as part of CarinaListener splited initialization logic into static block and ISuiteListener- onStart(suite) method incorporated DriverPool cleanup on shutdown hook Note: some changes are incompatible in comparison with 5.x.x versions and need manual updates according to the Migration Steps Migrated to the latest 6.14.3 TestNG version with fully supported retry execution feature Updated build numbering structure according all qaprosoft projects: 6 .0.0 - core generation 6. 0 .0 - service pack release 6.0. 0 - cross release build number which starts from 0 in 6th generation (in 5.x.x.x release latest build number is 5.3.3. 129 ) Finalized integration rules for Zafira integration: Add ZafiraListener in global pom.xml to inject it for all CI runs Add ZafiraListener into each TestNG suite to be able to run locally with Zafira integration Note: carina archetype updated accordingly Refactored DriverPool class and deliver it as functional IDriverPool interface It allowed to remove driver_mode property and calculate driver lifecycle automatically based on rules below: All drivers started during @BeforeSuite phase are saved across all suite run All drivers started during @BeforeClass phase are saved across current test class run All drivers started during @BeforeMethod phase or inside method are saved only for current method and closed automatically To be able to keep \"method mode\" drivers just use dependsOnMethods property in @Test annotation. Example: @Test() public void test1() { getDriver(); //start new driver ... } @Test(dependsOnMethods= test1 ) public void test2() { getDriver(); //get existing driver started in test1 as test2 depends on test1 ... } @Test() public void test3() { getDriver(); //start new driver as no dependencies detected ... } Moved unit tests into the valid modules to be able to track coverage results in Sonar Move some noisy log messages onto the DEBUG level added possibility to redefine log level for explicit sub-modules/classes core_log_level=DEBUG core_log_packages=IDriverPool,ZafiraConfigurator added support for Opera browser. For now both variants are ok: browser=opera browser=operablink Removed all TestRail updaters from Carina and all required dto classes. Integration with 3rd party testcase management tools will be allowed through the zafira only! Removed SMTP integration settings from Carina. All notification methods will be concentrated in Zafira Reporting Tool. Carina could only run and generate local report in ./reports/qa folder. Removed completely JUnit libraries from classpath to avoid invalid asserts import inside the test classes on projects level Removed cucumber integration as not used feature Removed all deprecated methods in DriverHelper Removed deprecated constructors in ExtendedWebElement class Fixes Improved driver restart logic fixing #364 and #552 . removed soapui.log4j.config property reused new getConstructorOrMethod() function for getting methods instances #558 , #546 , #542 , #532 , #519 , #512 , #505 , #484 , #483 , #480 , #479 , #375 , #343 [DEPENDENCIES UPDATES] TestNG 6.8.8- 6.14.3 zafira-client 3.3.37- 3.3.68-SNAPSHOT (due to the changed TestNG) selenium-server 3.14.0- 3.141.59 selenium-java 3.14.0- 3.141.59 jackson-databind.version 2.8.9- 2.8.11.1 org.apache.pdfbox 1.8.7- 1.8.16 org.testng 6.8.8- 6.14.3 Migration Steps Visit Migration Steps for details. 5.3.3.129 (2018-11-21) Enhancements Workaround Appium issue and enabled iOS Apps video recording Introduced new TestRail and QTest cases annotations Enabled secure (https) traffic sniffering via embedded proxy by default Removed dependencies conflicts to make browsermobproxy workable for secure content Published documentation about proxy usage Fixes Removed workaround for https://github.com/SeleniumHQ/selenium/issues/5299 as not required anymore. Note: tested on Chrome 69 and selenium-standalone 3.11.0-3.141.5 #525 Incorrect video count in test info [DEPENDENCIES UPDATES] exclude out-of-date 1.38 org.bouncycastle dependency 5.3.2.127 (2018-11-07) Enhancements Added possibility to start localized Chrome and Firefox browsers using \"browser_locale\" property Updated carina archetype content Updated snapshots qaprosoft repositories to use https protocol. Switched to latest ZafiraClient (3.3.47) with improvements to the AWS S3 screenshots uploading. We can provide expiresIn in seconds for each uploaded image Fixes Only \"priority\" tag name keep in reserved system names pool [DEPENDENCIES UPDATES] com.qaprosoft.zafira-client updated to 3.3.47 5.3.1.125 (2018-10-16) Enhancements Incorporated Carina pipeline build process into the common qps-pipeline library with such possibilities opened for everyone: Automatic snapshot build deployment based on PullRequest sources when \"build-snapshot\" label is assigned to the PR or \"build-snapshot\" is present in PR title Configured automatic PR checker static code analysis using Sonar PR checker Configured full static code analysis and snapshot build generation after merge to master @TestTag and @TestPriority annotations developed to be able to assign P0-P6 priorities to any test method and any custom tag like \"feature\" etc Switched to latest ZafiraClient (3.3.46) with custom tags registration funcitonality Fixes N/A [DEPENDENCIES UPDATES] maven-surefire-plugin 2.12.4- 2.22.1 maven-compiler-plugin 3.1- 3.8.0 maven-javadoc-plugin 2.3 - 3.0.1 maven-assembly-plugin 2.4.1 - 3.1.0 maven-source-plugin 2.4 - 3.0.1 com.qaprosoft.zafira-client updated to 3.3.46 5.3.0.124 (2018-10-08) Enhancements Refactored List and AbstractUI objects to speedup objects manipulations Switched to latest ZafiraClient (3.3.44) with screenshots publishing into AWS S3 Implemented async screenshot images publishing to AWS S3 Added optimize_video_recording parameter. If true video will be captured only for the final retry and as result failed only. Handled application crash on iOS with proper exception as only it happens Improved logging messages and format to sync with new gallery and log viewer Removed obsolete Parameter(s) ci_url ci_build keep_all_screenshots Removed obsolete com.qaprosoft.carina.core.foundation.webdriver.appium package Removed obsolete start/stop recording methods for Device Pushed to log WebDriver url when any exception is captured Be able to crypto aws access keys: http://qaprosoft.github.io/carina/security/ Fixes Found a root cause of the TestNG main thread crashes and delivered fixes (children DriverListener threads can't raise unchecked RuntimeException) Fixed huge regression defect with STF integration (added explicit adb disconnect to correctly stop device usage) Added explcit io.netty for carina-proxy module Fixed most of the serious Sonar complains Handled StaleElementReferenceException which appeared in 1.9.0 Appium Fix @CaseInsensitiveXPath annotation usage for more complicated xpath values [DEPENDENCIES UPDATES] com.qaprosoft.zafira-client updated to 3.3.44 5.2.5.119 (2018-08-23) Enhancements Disabled live screenshots appender into the Zafira Reporting Tool due to the performance degradation of elasticsearch Improved custom capabilities transfer between carina and custom mobile selenium-hub Added documentation about CustomTypePageFactory usage to generate unified Desktop/Android/iOS test classes. Added live VNC streaming support for drivers started in before suite/class/method actions Added new public static method DevicePool.isRegistered() Updated carina default archetype Fixes Updated copyright info Workaround applied for appium issue Hide some stacktrace messages during browser maximize as warning (mostly for the executing web tests on mobile devices/browsers) Cleanup in DesktopFactory removing obsolete functionality [DEPENDENCIES UPDATES] com.qaprosoft.zafira-client updated to 3.0.43 5.2.4.111 (2018-07-24) Enhancements Published new article for API and Mobile automation approaches: http://qaprosoft.github.io/carina/automation/api/ http://qaprosoft.github.io/carina/automation/mobile/ Improved actual browser_version identification and it's registration in Zafira Reporting Tool Introduced new DisableCacheLookup annotation to ExtendedWebElement to disable automatic caching and use object as locator proxy only Introduced @CaseInsensitiveXPath annotation (mostly for Android where different frameworks can recognize locator in different way) Split click operation for separated Web and Mobile actions to minimize negative side-effects MobileUtils - migrated tap etc operations onto the TouchOptions etc Note: if in your code thera direct references onto the TouchActions- tap operations you should update them as well because in 6.0.0 java appium client deprecated methods were removed. Example: https://github.com/qaprosoft/carina/commit/859d1f0d284462733e2c2ddf005bad3f48b41711 Introduced AndroidUtils.pressKeyboardKey(...) method Enabled logcat extractor for Android devices. Copying system device logs for each tests to capture crashes much easier Finalized with UI Dump generation utility (generating screenshot and metadata information on Android devices to be able to analyze xpath values in offline mode using uiautomator viewer) Improved integration with qps-pipeline to support demo screenshots publishing to CI for aborted testruns as well Fixes minor adjustments in UI operations for invisible elements on browsers fixed integration with ZafiraClient to specify default expiration for test artifacts (30 days) Resolve issues with default Timer operations (error messages instead of RuntimeException) Handled annoying cast exception \"java.lang.ClassCastException: com.google.common.collect.Maps$TransformedEntriesMap cannot be cast to java.lang.String\" which is produced mistakenly by Appium instead of StaleElementException Fixed potential recursive callss in DriverListener- onException method Fixed vnc pattern usage for live video streaming (Web and Android mobile) Fixed UIX schema files generation for Android mobile pages Fixed IE/Edge capabilities generation for use-case with BrowserStack Added thread name and id into the thread log appender messaging [DEPENDENCIES UPDATES] io.appium:java-client was updated to official 6.1.0 release org.seleniumhq.selenium:selenium-java updated to 3.12.0 com.qaprosoft.zafira-client updated to 3.0.40 5.2.4.97 (2018-06-02) Enhancements Published new article for API automation approach: http://qaprosoft.github.io/carina/automation/api/ MobileUtils - migrated tap etc operations onto the TouchOptions etc Note: if in your code thera direct references onto the TouchActions- tap operations you should update them as well because in 6.0.0 java appium client deprecated methods were removed. Example: 859d1f0 Split click operation for separated Web and Mobile actions to minimize negative side-effects Fixes minor adjustments in UI operations for invisible elements on browsers [DEPENDENCIES UPDATES] io.appium:java-client was updated to official 6.0.0 release org.seleniumhq.selenium:selenium-java updated to 3.12.0","title":"Release Notes"},{"location":"releases/#release-notes","text":"","title":"Release notes"},{"location":"releases/#6125-2019-07-29","text":"6.1.25","title":"6.1.25 (2019-07-29)"},{"location":"releases/#6124-2019-07-14","text":"6.1.24","title":"6.1.24 (2019-07-14)"},{"location":"releases/#starting-from-now-the-release-notes-will-be-published-only-on-github","text":"","title":"Starting from now, the release notes will be published only on Github!"},{"location":"releases/#6122-2019-06-29","text":"Enhancements #736 Updated @MethodOwner annotation. secondaryOwner parameter no longer exists, instead of this parameter added platform filter where neccessary: Note: previous single @MethodOwner annotation without platform works as well @MethodOwner(owner = user1 , platform = android ) @MethodOwner(owner = user2 , platform = ios ) #749 Added ability to set custom test data directory name. This functionality is available via ReportContext.setCustomTestDirName(\"customName\") method. #751 provided anonymous access to carina CI jobs #752 Added generation of JavaDoc #754 Renamed browser_locale property to browser_language Note: make sure to update your project _config.properties accordingly to be able to override browser language! Added release and snapshot build job statuses to carina github Fixes Browser resize moved to DesktopFactory only to minimize errors in mobile web tests. Browser window resolution sets according to capabilites.resolution values, otherwise maximizes the window using old functionality. Known Issues N/A [DEPENDENCIES UPDATES] zafira-client 4.0.56 - 4.0.57 Migration Steps Remove all occurrences of secondaryOwner parameter for @MethodOwner annotation. Use platform filter based on the information above instead To complete migration, replace in your _config.properties all occurrences of browser_locale to browser_language","title":"6.1.22 (2019-06-29)"},{"location":"releases/#6121-2019-06-09","text":"Enhancements Added full integration with ZebRunner (Super Fast Test Automation Cloud Solution) Cleaned up Carina archetype in accordance with the latest changes (dependencies, removal of obsolete files, etc.) Released 6.1.21 archetype and updated \"Getting started\" document accordingly Redesigned integration with S3 in scope of #703 reusing valid functionality from ZafiraClient and removing obsolete Amazon properties from config.properties #720 Migrate AndroidUtils and IOSUtils to functional interfaces enhancement: platform independent IMobileUtils- isAppRunning() implemented AndroidService- checkCurrentDeviceFocus() deprecated removed already deprecated executeKeyEvent, pressKeyCode, pressBack, swipeInContainer, waitUntilElementNotPresent from IAndroidUtils Fixes #745 Bump up com.fasterxml.jackson.core:jackson-databind to 2.9.9 bug #744 Upgrade jacoc-maven-plugin to 0.8.4 in carina and carina-archetype #740 Unable to take a screenshot on a test failure bug #731 Rerun failures and logic onTestFailure doesn't work for the tests with dependsOnMethods #727 Unable to deploy fresh documentation using upgraded pipeline to v 4.0 #703 UI dump report for mobile runs should be published to S3 as an artifact bug fixed NPE in type method when null was provided as an argument Known Issues N/A [DEPENDENCIES UPDATES] maven-surefire-plugin 3.0.0-M3 jacoco-maven-plugin 0.8.2 - 0.8.4 jackson-databind 2.8.8 - 2.8.9","title":"6.1.21 (2019-06-09)"},{"location":"releases/#6120-2019-05-17","text":"Enhancements integrated with 4.0.53 Zafira Server and 4.0.56 Zafira Client! Important: Please, don't migrate to this core version without upgrading Zafira Reporting Tool. #715 Bump up to 4.0.56 zafira-client with fixes for dynamic tags registration (#701) #461 Added support for web mobile execution on real devices using embedded QPS-HUB: Chrome, Firefox Also coming soon: Samsung Native browser, Edge, Opera, Opera Mini and Yandex mobile browsers Added localized date and time settings support for Android 9 #722 Deprecated com.qaprosoft.carina.core.foundation.utils.android.Androidutils and com.qaprosoft.carina.core.foundation.utils.ios.IosUtils. Functional IAndroidUtils and IIosUtils added instead #621 Removed CustomTypePageFactory Note: Reuse ICustomTypePageFactory functional interface updating imports and removing static calls Fixes #711 Fixed Maven compiler source and target argument using 1.8 Java for both Hide \"Timer not stopped for operation: ..\" to debug level as it is not so important Known Issues N/A [DEPENDENCIES UPDATES] zafira-client 3.4.55 - 4.0.56","title":"6.1.20 (2019-05-17)"},{"location":"releases/#6019-2019-05-01","text":"Enhancements integrated with 4.0.52 Zafira Server! Important: Please, don't migrate to this core version without upgrading Zafira Reporting Tool. Bump up to 3.4.55 zafira-client which support ZAFIRA_ARTIFACTS_USE_PROXY feature for permanent artifacts storing in AWS S3 Fixes N/A Known Issues N/A [DEPENDENCIES UPDATES] zafira-client 3.4.54 - 3.4.55","title":"6.0.19 (2019-05-01)"},{"location":"releases/#6018-2019-04-15","text":"Enhancements integrated with 3.4.51 Zafira Server! Important: Please, don't migrate to this core version without upgrading Zafira Reporting Tool. Finished with artifacts uploading improvements to S3 including asynchronous uploading Add Google spreadsheet data provider @Test(dataProvider = SingleDataProvider ) @XlsDataSourceParameters( spreadsheetId = 1G.... , sheet = urls , executeValue = TRUE , dsUid = TUID , dsArgs = TUID, ARG1, ARG2 ) public void test(String TUID, String ARG1, String ARG2) added support for mobile web tests execution against QPS-HUB in qps-infra Published howto article about @ExtendedFindBy() usage for mobile elements Fixes N/A Known Issues N/A [DEPENDENCIES UPDATES] maven-surefire-plugin 2.22.1 - 3.0.0-M3 zafira-client 3.3.51 - 3.4.54","title":"6.0.18 (2019-04-15)"},{"location":"releases/#6016-2019-03-15","text":"Enhancements integrated with 3.3.48 Zafira Server! Important: Please, don't migrate to it's core version without upgrading Zafira Reporting Tool. Improved artifacts uploading to amazon S3. Updated existing screenshots capturing with ability to register important screenshots as test artifacts introduced new \"ignore_ssl=false\" property for carina-api module. If enabled api tests ignore handshake exception during tests run Fixes Hopefully permanent fix delivered for a mess with capturing screenshots over the died driver Note: in case of any exception in child thread TestNG crash execution of it's logic and do not execute after methods/classes etc. Our DriverListener is a child thread. #673 Fixed extra places with potential NPE Known Issues N/A [DEPENDENCIES UPDATES] zafira-client 3.3.49 - 3.3.51","title":"6.0.16 (2019-03-15)"},{"location":"releases/#6012-2019-02-25","text":"Enhancements #648 Implement findByImage strategy Added instructions \"How to use Find by image strategy\". Avoid input field clearing for empty control Fixes closing BEFORE_CLASS drivers during \"onFinish(ITestContext context)\" Added extra debug logging messages for FtpUtils to simplify failures debugging declared ARTIFACTS_EXPIRATION_SECONDS as configuration parameter to see it's value in log Known Issues N/A [DEPENDENCIES UPDATES] jackson-databind 2.8.11.3 - 2.9.8 jackson-annotations 2.9.8","title":"6.0.12 (2019-02-25)"},{"location":"releases/#6011-2019-02-05","text":"Enhancements N/A Fixes #652 web video quality property is missed Known Issues N/A [DEPENDENCIES UPDATES] N/A","title":"6.0.11 (2019-02-05)"},{"location":"releases/#6010-2019-01-29","text":"Enhancements #566 Add new parameters for video recording to match appium 1.10 implementation Prepared MobileSampleTest for iOS/Android and internal application in carina-demo Fixes ExtendedWebElement.scrollTo() refactored using up to date Locatable class Known Issues #637 Abnormal behavior when swiping left or right More information requested #652 web video quality property is missed [DEPENDENCIES UPDATES] N/A","title":"6.0.10 (2019-01-29)"},{"location":"releases/#609-2019-01-22","text":"Enhancements #618 Update appium java client to the latest version (7.0.0) #622 Create Zoom in/out in MobileUtils/IMobileUtils #534 , #563 Improved BrowserMob proxy coverage by unit tests including example for secure traffic sniffer. Take a look for example. Also disabled proxy_set_to_system=false property by default. It should be enabled only if you have to use your internal corporate proxy to have access to internet. #436 , #326 Registering device information for unsuccessful driver start. Available only in scope of https://www.qps-infra.io and https://mobiletesting.farm Note: Appium should be patched to incorporate custom details into the exception (system-calls.js) Fixes #625 AbstractTest doesn't implement ICustomTypePageFactory #629 Annoying INFO message: Value not resolved by key: PRODUCTION.url #636 operations with relative elements in AbstractUiObject are broken #634 do not restart proxy during driver restart on the same device Known Issues #637 Abnormal behavior when swiping left or right [DEPENDENCIES UPDATES] io.appium.java-client 6.1.0 - 7.0.0","title":"6.0.9 (2019-01-22)"},{"location":"releases/#608-2019-01-15","text":"Enhancements #614 refactor CustomTypePageFactory to interface Note: CustomTypePageFactory.initPage(...) should be replaced by initPage(...) also we again return initPage(...) method without driver as argument CustomTypePageFactory.initPage(...); // it should be replaced in most cases by initPage(...); #608 update copyright info using 2019 #612 Test execution by filter rules. Annotations for future filtering can be set in tests in following way for test method and inside config.properties : @TestPriority(Priority.P1) @MethodOwner(owner = owner ) @TestTag(name = feature , value = reg ) // _config.properties: test_run_rules=PRIORITY= P1 amp; amp;P2;;OWNER= owner;;TAGS= tag1=temp amp; amp;feature=reg rules logic: test_run_rules={RULE_NAME_ENUM}= {RULE_VALUE1} {RULE_VALUE2};;... //Listener should be added in pom.xml or in required suite listener class-name= com.qaprosoft.carina.core.foundation.listeners.FilterTestsListener / Fixes #533 Default url parameter is not detected by envLoader #613 openURL functionality refactoring Improved hasDependencies logic using short and full qualified class/method names Improved negative use-case handlers avoiding loop in making screenshots and generating UiDump Added deprecation javadoc for DriverHelper.tapWithCoordinates(double x, double y) #623 LOGGER is not being recognized correctly in 6.0.7 Known Issues N/A [DEPENDENCIES UPDATES] N/A","title":"6.0.8 (2019-01-15)"},{"location":"releases/#606-2019-01-07","text":"Enhancements #607 refactor DevicePool logic integrating it completely into DriverPool Note: Due to the removed DevicePool class some code refactoring on project level needed. Mostly for devicePool.getDevice() which is not available anymore: DevicePool.getDevice(); // it should be replaced in most cases by getDevice(); // for the use-case when you need it in static way use IDriverPool.getDefaultDevice(); // Also we have new methods to get device by driver name! getDevice( default ); // return device assigned to default driver getDevice( custom ); //return device addigned to custom driver. // if no driver discovered in the pool with provided name then nullDevice will be returned #610 Declared easy way to control drivers quit on project layer. You can disable core logic with no way to enable it back for current test run. Anyway, Carina will close drivers on suite finish. // Execute as only you would like to disable automatic drivers quit CarinaListener.disableDriversCleanup(); #581 Agreed to avoid drivers keep for depenent groups. In case you need it please disable automatic drivers quit according to the step above and organize quit using your own logic. #599 Upgrade com.fasterxml.jackson.core:jackson-databind to version 2.8.11.3 or later Fixes Fixed potential recursive loops in DriverListener during failures detection #605 review and complete IDriverPool TODO's #609 hide \"Can't save file to Amazon S3!\" error message stack-trace #604 device name for the test is not registered in Zafira #584 DevicePool.getDevice() returns different objects of the same device Known Issues N/A [DEPENDENCIES UPDATES] com.fasterxml.jackson.core: jackson-databind 2.8.11.1- 2.8.11.3","title":"6.0.6 (2019-01-07)"},{"location":"releases/#605-2019-01-04","text":"Enhancements #565 carina-api: api.validateResponseAgainstJSONSchema should support schema draft 7 Set of improvements into the IDriverPool to make its modification threads safety Start global migration of MobileUtils to IMobileUtils interface Register device information in global driversPool for each driver session Moved drivers quit and devices disconnect onto the java shutdown hook to kill sessions even for aborted tests/jobs Saved information about integrated with STF device in Device object with automatic disconnect on finish Do not show encrypted text in logs (aka user credentials etc) Fixes #590 org.openqa.selenium.remote.RemoteWebDriver cannot be cast to io.appium.java_client.MobileDriver #590 Device type is defined incorrectly in several cases for iOS/Android tests #588 we still can generate ConcurrentModificationException during driver quit operation #574 annoying INFO message in log for specific use-cases #459 Enormous amount of logs appears in console on attempt to use element.clickIfPresent(3) Disabled screenshots capturing for three more driver failures: was terminated due to CLIENT_STOPPED_SESSION Session ID is null. Using WebDriver after calling quit() was terminated due to BROWSER_TIMEOUT Known Issues N/A [DEPENDENCIES UPDATES] N/A","title":"6.0.5 (2019-01-04)"},{"location":"releases/#604-2018-12-27","text":"Enhancements N/A Fixes #553 6.0: Rebuild failures doesn't work #582 Hardcoded parameters in carina archetype (-Dname and -Durl) Known Issues N/A [DEPENDENCIES UPDATES] zafira-client 3.3.47- 3.3.49","title":"6.0.4 (2018-12-27)"},{"location":"releases/#603-2018-12-21","text":"Enhancements #570 Updated iDriverPool returning back automatic driver quit onto AfterMethod phase as it was in 5.3.x core. New approach was rejected due to the discovered regressions #567 Added new browsermob_host parameter to override automatically detected IP address for embedded proxy. Updated manual accordingly http://qaprosoft.github.io/carina/proxy #568 Returned Chrome browser maximize to the default method removing old workaround with hardcoded dimension 576 Removed sensitive information from logs during onType and onAttachFile operations #574 Removed invalid log4j appender and hide noisy log messages on startup Adjust custom_capabilities usage allowing not only define it globally but generate for each driver session // start new driver with generated capabilities based on capabilities inside // Samsung_Galaxy_S8.properties property file WebDriver drv = getDriver( name , new CapabilitiesLoader().getCapabilities( browserstack/android/Samsung_Galaxy_S8.properties )) Removed obsolete extra_capabilities configuration parameter Declared Spring Plugins repository in pom.xml to download from scratch monte-repack (javax.media.jai) dependency Known Issues #553 In the integration with Zafira environment rerun failures is still broke [DEPENDENCIES UPDATES] N/A","title":"6.0.3 (2018-12-21)"},{"location":"releases/#602-2018-12-04","text":"Enhancements Starting from 6.0.x carina-core became a listener with unified CarinaListener class: most of the AbstractTest core methods moved to CarinaListener incorporated HealthCheckListener as part of CarinaListener splited initialization logic into static block and ISuiteListener- onStart(suite) method incorporated DriverPool cleanup on shutdown hook Note: some changes are incompatible in comparison with 5.x.x versions and need manual updates according to the Migration Steps Migrated to the latest 6.14.3 TestNG version with fully supported retry execution feature Updated build numbering structure according all qaprosoft projects: 6 .0.0 - core generation 6. 0 .0 - service pack release 6.0. 0 - cross release build number which starts from 0 in 6th generation (in 5.x.x.x release latest build number is 5.3.3. 129 ) Finalized integration rules for Zafira integration: Add ZafiraListener in global pom.xml to inject it for all CI runs Add ZafiraListener into each TestNG suite to be able to run locally with Zafira integration Note: carina archetype updated accordingly Refactored DriverPool class and deliver it as functional IDriverPool interface It allowed to remove driver_mode property and calculate driver lifecycle automatically based on rules below: All drivers started during @BeforeSuite phase are saved across all suite run All drivers started during @BeforeClass phase are saved across current test class run All drivers started during @BeforeMethod phase or inside method are saved only for current method and closed automatically To be able to keep \"method mode\" drivers just use dependsOnMethods property in @Test annotation. Example: @Test() public void test1() { getDriver(); //start new driver ... } @Test(dependsOnMethods= test1 ) public void test2() { getDriver(); //get existing driver started in test1 as test2 depends on test1 ... } @Test() public void test3() { getDriver(); //start new driver as no dependencies detected ... } Moved unit tests into the valid modules to be able to track coverage results in Sonar Move some noisy log messages onto the DEBUG level added possibility to redefine log level for explicit sub-modules/classes core_log_level=DEBUG core_log_packages=IDriverPool,ZafiraConfigurator added support for Opera browser. For now both variants are ok: browser=opera browser=operablink Removed all TestRail updaters from Carina and all required dto classes. Integration with 3rd party testcase management tools will be allowed through the zafira only! Removed SMTP integration settings from Carina. All notification methods will be concentrated in Zafira Reporting Tool. Carina could only run and generate local report in ./reports/qa folder. Removed completely JUnit libraries from classpath to avoid invalid asserts import inside the test classes on projects level Removed cucumber integration as not used feature Removed all deprecated methods in DriverHelper Removed deprecated constructors in ExtendedWebElement class Fixes Improved driver restart logic fixing #364 and #552 . removed soapui.log4j.config property reused new getConstructorOrMethod() function for getting methods instances #558 , #546 , #542 , #532 , #519 , #512 , #505 , #484 , #483 , #480 , #479 , #375 , #343 [DEPENDENCIES UPDATES] TestNG 6.8.8- 6.14.3 zafira-client 3.3.37- 3.3.68-SNAPSHOT (due to the changed TestNG) selenium-server 3.14.0- 3.141.59 selenium-java 3.14.0- 3.141.59 jackson-databind.version 2.8.9- 2.8.11.1 org.apache.pdfbox 1.8.7- 1.8.16 org.testng 6.8.8- 6.14.3 Migration Steps Visit Migration Steps for details.","title":"6.0.2 (2018-12-04)"},{"location":"releases/#533129-2018-11-21","text":"Enhancements Workaround Appium issue and enabled iOS Apps video recording Introduced new TestRail and QTest cases annotations Enabled secure (https) traffic sniffering via embedded proxy by default Removed dependencies conflicts to make browsermobproxy workable for secure content Published documentation about proxy usage Fixes Removed workaround for https://github.com/SeleniumHQ/selenium/issues/5299 as not required anymore. Note: tested on Chrome 69 and selenium-standalone 3.11.0-3.141.5 #525 Incorrect video count in test info [DEPENDENCIES UPDATES] exclude out-of-date 1.38 org.bouncycastle dependency","title":"5.3.3.129 (2018-11-21)"},{"location":"releases/#532127-2018-11-07","text":"Enhancements Added possibility to start localized Chrome and Firefox browsers using \"browser_locale\" property Updated carina archetype content Updated snapshots qaprosoft repositories to use https protocol. Switched to latest ZafiraClient (3.3.47) with improvements to the AWS S3 screenshots uploading. We can provide expiresIn in seconds for each uploaded image Fixes Only \"priority\" tag name keep in reserved system names pool [DEPENDENCIES UPDATES] com.qaprosoft.zafira-client updated to 3.3.47","title":"5.3.2.127 (2018-11-07)"},{"location":"releases/#531125-2018-10-16","text":"Enhancements Incorporated Carina pipeline build process into the common qps-pipeline library with such possibilities opened for everyone: Automatic snapshot build deployment based on PullRequest sources when \"build-snapshot\" label is assigned to the PR or \"build-snapshot\" is present in PR title Configured automatic PR checker static code analysis using Sonar PR checker Configured full static code analysis and snapshot build generation after merge to master @TestTag and @TestPriority annotations developed to be able to assign P0-P6 priorities to any test method and any custom tag like \"feature\" etc Switched to latest ZafiraClient (3.3.46) with custom tags registration funcitonality Fixes N/A [DEPENDENCIES UPDATES] maven-surefire-plugin 2.12.4- 2.22.1 maven-compiler-plugin 3.1- 3.8.0 maven-javadoc-plugin 2.3 - 3.0.1 maven-assembly-plugin 2.4.1 - 3.1.0 maven-source-plugin 2.4 - 3.0.1 com.qaprosoft.zafira-client updated to 3.3.46","title":"5.3.1.125 (2018-10-16)"},{"location":"releases/#530124-2018-10-08","text":"Enhancements Refactored List and AbstractUI objects to speedup objects manipulations Switched to latest ZafiraClient (3.3.44) with screenshots publishing into AWS S3 Implemented async screenshot images publishing to AWS S3 Added optimize_video_recording parameter. If true video will be captured only for the final retry and as result failed only. Handled application crash on iOS with proper exception as only it happens Improved logging messages and format to sync with new gallery and log viewer Removed obsolete Parameter(s) ci_url ci_build keep_all_screenshots Removed obsolete com.qaprosoft.carina.core.foundation.webdriver.appium package Removed obsolete start/stop recording methods for Device Pushed to log WebDriver url when any exception is captured Be able to crypto aws access keys: http://qaprosoft.github.io/carina/security/ Fixes Found a root cause of the TestNG main thread crashes and delivered fixes (children DriverListener threads can't raise unchecked RuntimeException) Fixed huge regression defect with STF integration (added explicit adb disconnect to correctly stop device usage) Added explcit io.netty for carina-proxy module Fixed most of the serious Sonar complains Handled StaleElementReferenceException which appeared in 1.9.0 Appium Fix @CaseInsensitiveXPath annotation usage for more complicated xpath values [DEPENDENCIES UPDATES] com.qaprosoft.zafira-client updated to 3.3.44","title":"5.3.0.124 (2018-10-08)"},{"location":"releases/#525119-2018-08-23","text":"Enhancements Disabled live screenshots appender into the Zafira Reporting Tool due to the performance degradation of elasticsearch Improved custom capabilities transfer between carina and custom mobile selenium-hub Added documentation about CustomTypePageFactory usage to generate unified Desktop/Android/iOS test classes. Added live VNC streaming support for drivers started in before suite/class/method actions Added new public static method DevicePool.isRegistered() Updated carina default archetype Fixes Updated copyright info Workaround applied for appium issue Hide some stacktrace messages during browser maximize as warning (mostly for the executing web tests on mobile devices/browsers) Cleanup in DesktopFactory removing obsolete functionality [DEPENDENCIES UPDATES] com.qaprosoft.zafira-client updated to 3.0.43","title":"5.2.5.119 (2018-08-23)"},{"location":"releases/#524111-2018-07-24","text":"Enhancements Published new article for API and Mobile automation approaches: http://qaprosoft.github.io/carina/automation/api/ http://qaprosoft.github.io/carina/automation/mobile/ Improved actual browser_version identification and it's registration in Zafira Reporting Tool Introduced new DisableCacheLookup annotation to ExtendedWebElement to disable automatic caching and use object as locator proxy only Introduced @CaseInsensitiveXPath annotation (mostly for Android where different frameworks can recognize locator in different way) Split click operation for separated Web and Mobile actions to minimize negative side-effects MobileUtils - migrated tap etc operations onto the TouchOptions etc Note: if in your code thera direct references onto the TouchActions- tap operations you should update them as well because in 6.0.0 java appium client deprecated methods were removed. Example: https://github.com/qaprosoft/carina/commit/859d1f0d284462733e2c2ddf005bad3f48b41711 Introduced AndroidUtils.pressKeyboardKey(...) method Enabled logcat extractor for Android devices. Copying system device logs for each tests to capture crashes much easier Finalized with UI Dump generation utility (generating screenshot and metadata information on Android devices to be able to analyze xpath values in offline mode using uiautomator viewer) Improved integration with qps-pipeline to support demo screenshots publishing to CI for aborted testruns as well Fixes minor adjustments in UI operations for invisible elements on browsers fixed integration with ZafiraClient to specify default expiration for test artifacts (30 days) Resolve issues with default Timer operations (error messages instead of RuntimeException) Handled annoying cast exception \"java.lang.ClassCastException: com.google.common.collect.Maps$TransformedEntriesMap cannot be cast to java.lang.String\" which is produced mistakenly by Appium instead of StaleElementException Fixed potential recursive callss in DriverListener- onException method Fixed vnc pattern usage for live video streaming (Web and Android mobile) Fixed UIX schema files generation for Android mobile pages Fixed IE/Edge capabilities generation for use-case with BrowserStack Added thread name and id into the thread log appender messaging [DEPENDENCIES UPDATES] io.appium:java-client was updated to official 6.1.0 release org.seleniumhq.selenium:selenium-java updated to 3.12.0 com.qaprosoft.zafira-client updated to 3.0.40","title":"5.2.4.111 (2018-07-24)"},{"location":"releases/#52497-2018-06-02","text":"Enhancements Published new article for API automation approach: http://qaprosoft.github.io/carina/automation/api/ MobileUtils - migrated tap etc operations onto the TouchOptions etc Note: if in your code thera direct references onto the TouchActions- tap operations you should update them as well because in 6.0.0 java appium client deprecated methods were removed. Example: 859d1f0 Split click operation for separated Web and Mobile actions to minimize negative side-effects Fixes minor adjustments in UI operations for invisible elements on browsers [DEPENDENCIES UPDATES] io.appium:java-client was updated to official 6.0.0 release org.seleniumhq.selenium:selenium-java updated to 3.12.0","title":"5.2.4.97 (2018-06-02)"},{"location":"security/","text":"Security functionality in Carina framework is required for sensitive data that should be hidden in test configurations and logging. It uses a symmetric key encryption algorithm for security implementation, which means that anyone may encrypt/decrypt the data in the same way, using the same key. In Carina framework, AES encryption is used by default with a 128-bit security key. Anyone may generate their own security key and encrypt the data using this key, so that the decrypted valid data may be used in the test only if the valid key is specified in the test configuration. Also, one may use the default common key located in the test resources, giving access to all other users for secured data decryption. Secured data preparation For secured data preparation, we implemented a special tool that helps to generate crypto keys and encrypt/decrypt test data files. Here is a usage tip: com.qaprosoft.carina.core.foundation.crypto.CryptoConsole -generate -key_file file_path_to_save_key com.qaprosoft.carina.core.foundation.crypto.CryptoConsole -encrypt -string string_to_encrypt -key_file key_file_path com.qaprosoft.carina.core.foundation.crypto.CryptoConsole -decrypt -string string_to_decrypt -key_file key_file_path com.qaprosoft.carina.core.foundation.crypto.CryptoConsole -encrypt -file csv_file_to_encrypt -key_file key_file_path com.qaprosoft.carina.core.foundation.crypto.CryptoConsole -decrypt -file csv_file_to_decrypt -key_file key_file_path To generate an individual crypto key: Go to \"Run configuration\" in Eclipse Create a new Java application configuration selecting the project and the main class com.qaprosoft.carina.core.foundation.crypto.CryptoConsole : Set arguments Press Apply and then Run Crypto key will be generated: To prepare a test data file with secured data: Prepare an input file using the pattern {crypt:str_to_encrypt} for secured values Prepare an input file using the pattern {crypt:str_to_encrypt} for secured values. Go to \u201cRun configuration\u201d, navigate to the arguments tab and execute an encryption command specifying the key path and input file: File with encrypted data will be generated: To encrypt a single string, use the following config: Encrypted string will be shown in the console: To decrypt the encrypted file, execute: Decrypted file will be generated: Secured data usage You may use encrypted values, both in test configuration and test data files; pay attention to the fact that there is no explicit BeforeTest listener for data decryption, so there is no way to find out later in the test if the data is sensitive or not. All the decryption logic is located in WebDriverHelper that wraps Selenium WebDriver methods for interaction with UI and encapsulates action logging logic. Every method that receives a text tests if the text contains {crypt:...} pattern, and if it does, decrypts it and passes it to UI- logging, and screenshots are populated with hidden characters:","title":"Security"},{"location":"security/#secured-data-preparation","text":"For secured data preparation, we implemented a special tool that helps to generate crypto keys and encrypt/decrypt test data files. Here is a usage tip: com.qaprosoft.carina.core.foundation.crypto.CryptoConsole -generate -key_file file_path_to_save_key com.qaprosoft.carina.core.foundation.crypto.CryptoConsole -encrypt -string string_to_encrypt -key_file key_file_path com.qaprosoft.carina.core.foundation.crypto.CryptoConsole -decrypt -string string_to_decrypt -key_file key_file_path com.qaprosoft.carina.core.foundation.crypto.CryptoConsole -encrypt -file csv_file_to_encrypt -key_file key_file_path com.qaprosoft.carina.core.foundation.crypto.CryptoConsole -decrypt -file csv_file_to_decrypt -key_file key_file_path To generate an individual crypto key: Go to \"Run configuration\" in Eclipse Create a new Java application configuration selecting the project and the main class com.qaprosoft.carina.core.foundation.crypto.CryptoConsole : Set arguments Press Apply and then Run Crypto key will be generated: To prepare a test data file with secured data: Prepare an input file using the pattern {crypt:str_to_encrypt} for secured values Prepare an input file using the pattern {crypt:str_to_encrypt} for secured values. Go to \u201cRun configuration\u201d, navigate to the arguments tab and execute an encryption command specifying the key path and input file: File with encrypted data will be generated: To encrypt a single string, use the following config: Encrypted string will be shown in the console: To decrypt the encrypted file, execute: Decrypted file will be generated:","title":"Secured data preparation"},{"location":"security/#secured-data-usage","text":"You may use encrypted values, both in test configuration and test data files; pay attention to the fact that there is no explicit BeforeTest listener for data decryption, so there is no way to find out later in the test if the data is sensitive or not. All the decryption logic is located in WebDriverHelper that wraps Selenium WebDriver methods for interaction with UI and encapsulates action logging logic. Every method that receives a text tests if the text contains {crypt:...} pattern, and if it does, decrypts it and passes it to UI- logging, and screenshots are populated with hidden characters:","title":"Secured data usage"},{"location":"automation/api/","text":"Introduction Rest API testing is a vital part of integration testing process, it may be used separately or together with web, mobile or DB testing. The general process may be described by the following steps: Compile an HTTP request with the required meta data Send the prepared data to the required server endpoint Validate the HTTP status and response data Extract some response data for the next requests Build a call to the next (or the same) endpoint using (or not using) the data from the previous response The schema below demonstrates the sequence: From this perspective, we decided to use the following instruments: Rest-assured - \"Testing and validation of REST services in Java are harder than in dynamic languages such as Ruby and Groovy. REST Assured brings the simplicity of using these languages into the Java domain.\" Freemarker - \"Apache FreeMarker is a template engine: a Java library to generate text output (HTML web pages, e-mails, configuration files, source code, etc.) based on templates and changing data.\" JsonPath - library for extracting data from JSON body JsonAssert - library for comparing the actual JSON body with an expected one Json-schema-validator - library for validating of JSON body for matching to JSON schema Example of test implementation Let's create an automated test for the next call: POST https://jsonplaceholder.typicode.com/users request with a request body [ { id : 1, name : SOME_NAME , username : SOME_USERNAME , email : Sincere@april.biz , address : { street : Kulas Light , suite : Apt. 556 , city : Gwenborough , zipcode : 92998-3874 , geo : { lat : -37.3159 , lng : 81.1496 } }, phone : 1-770-736-8031 x56442 , website : hildegard.org , company : { name : SOME_COMPANY_NAME , catchPhrase : Multi-layered client-server neural-net , bs : harness real-time e-markets } } ] and the response body the same as the request body Definition of request and response templates If we are going to send POST request, we need to create a request template with some placeholders that may be replaced by different arguments for different test flows. The best place to store these resources is src/test/resources/api package, try to keep REST hierarchy in a package structure for better maintenance and visibility: Request (rq.json) and response (rs.json) templates have some placeholders that will be populated from the tests later on: While user.properties contains some default value which may be replaced later: REST service call domain object Now we are ready to create REST service domain object which will be used to interact with web service and perform additional response validations. Our domain object is located in /carina-demo/src/main/java/com/qaprosoft/carina/demo/api, make sure that it extends AbstractApiMethodV2 and triggers the base class constructor for initialization. In general cases, you will specify the path to request and response templates along with default properties files (all of them have been created in the previous step). Also, we replace the URL placeholder to set an appropriate environment. package com.qaprosoft.carina.demo.api; import com.qaprosoft.carina.core.foundation.api.AbstractApiMethodV2; import com.qaprosoft.carina.core.foundation.utils.Configuration; public class PostUserMethod extends AbstractApiMethodV2 { public PostUserMethod() { super( api/users/_post/rq.json , api/users/_post/rs.json , api/users/user.properties ); replaceUrlPlaceholder( base_url , Configuration.getEnvArg( api_url )); } } HTTP method and path The last step before the test implementation itself is the association of the domain object class and the required HTTP method and path. It should be defined in /carina-demo/src/main/resources/_api.properties file, the key should be equal to domain class name, the value has the following pattern {http_method}:{http_path}. The HTTP path may contain placeholders, the HTTP method should be one of the following variants: GET, POST, PUT, UPDATE, DELETE. #=====================================================# #=================== API methods ====================# #=====================================================# GetUserMethods=GET:${base_url}/users PostUserMethod=POST:${base_url}/users DeleteUserMethod=DELETE:${base_url}/users/1 PutPostsMethod=PUT:${base_url}/posts/1 PatchPostsMethod=PATCH:${base_url}/posts/1 API test API test is the general TestNG test, a class should extend APITest, in our case, the test extends it over AbstractTest that encapsulates some test data and login method. The test is located in /carina-demo/src/test/java/com/qaprosoft/carina/demo. package com.qaprosoft.carina.demo; import org.skyscreamer.jsonassert.JSONCompareMode; import org.testng.annotations.Test; import com.qaprosoft.apitools.validation.JsonCompareKeywords; import com.qaprosoft.carina.core.foundation.AbstractTest; import com.qaprosoft.carina.core.foundation.api.http.HttpResponseStatusType; import com.qaprosoft.carina.core.foundation.utils.ownership.MethodOwner; import com.qaprosoft.carina.demo.api.DeleteUserMethod; import com.qaprosoft.carina.demo.api.GetUserMethods; import com.qaprosoft.carina.demo.api.PostUserMethod; public class APISampleTest extends AbstractTest { @Test(description = JIRA#DEMO-0001 ) @MethodOwner(owner = qpsdemo ) public void testCreateUser() throws Exception { PostUserMethod api = new PostUserMethod(); api.expectResponseStatus(HttpResponseStatusType.CREATED_201); api.callAPI(); api.validateResponse(); } @Test(description = JIRA#DEMO-0002 ) @MethodOwner(owner = qpsdemo ) public void testCreateUserMissingSomeFields() throws Exception { PostUserMethod api = new PostUserMethod(); api.getProperties().remove( name ); api.getProperties().remove( username ); api.expectResponseStatus(HttpResponseStatusType.CREATED_201); api.callAPI(); api.validateResponse(); } @Test(description = JIRA#DEMO-0003 ) @MethodOwner(owner = qpsdemo ) public void testGetUsers() { GetUserMethods getUsersMethods = new GetUserMethods(); getUsersMethods.expectResponseStatus(HttpResponseStatusType.OK_200); getUsersMethods.callAPI(); getUsersMethods.validateResponse(JSONCompareMode.STRICT, JsonCompareKeywords.ARRAY_CONTAINS.getKey()); getUsersMethods.validateResponseAgainstJSONSchema( api/users/_get/rs.schema ); } } Test steps once again Create REST call object Specify the properties for a request/response placeholder Add headers if required Specify the expected HTTP status Call API Validate the response by a template or parse some data by JSON path Make further calls using the data from the previous call if needed Useful features The framework contains a list of useful features for requests building and for responses validation. It makes the support of such tests easier and at the same time minimizes the amount of test data. Wildcards In some cases, you may need to generate data in the request to make the request data unique. The best way to do this is to use wildcards for data generation: { username : generate_word(10) , // Will generate random alphanumeric string with 10 characters zip : generate_number(6) , // Will generate random number with 6 digits birthday : generate_date(yyyy-MM-dd;0) // Will generate current date (first arg is date format, second is delta in days from now) } Another option is to specify the placeholder in the request template and then pass some generated value directly from the test method. Another way of wildcards' usage is response validation. In some cases, you may need to skip some values or validate by regex: { id : skip , // Will skip actual value validation and just verify id key presence signup_date : regex:\\\\d{4}-\\\\d{2}-\\\\d{2} , // Will validate date value by specified regex } Validation against JSON schema When you need to validate response structure regardless of the actual values, you may use validation by JSON schema. In this case, you need an actual response from the service, let's say we have the following: { email : test@domain.com , firstName : SOME FIRST NAME , id : 11111 } Now we need to generate a schema (you may use any generator you like, for example, https://jsonschema.net/). IMPORTANT: For now, the schemas of version draft03 and draft04 are supported only. Please, use the appropriate generator (e.g. https://www.liquid-technologies.com/online-json-to-schema-converter) In the tool like this you need to provide the original JSON from the response, then choose some schema options (allow the additional properties in objects, mark the current object properties as required, hard-code some expected values, etc.) and then generate the schema. Copy-paste the generated schema into test resources, and you're ready to use it in the test. Make sure that you change all the flags required to true. After that, create a new file in the resources and place it into an appropriate endpoint package: { type : object , $schema : http://json-schema.org/draft-03/schema , id : http://jsonschema.net , required :true, properties :{ email : { type : string , id : http://jsonschema.net/email , required :true }, firstName : { type : string , id : http://jsonschema.net/firstName , required :true }, id : { type : number , id : http://jsonschema.net/id , required :true } } } And finally, we call JSON validation from Java test as the following: @Test public void testCheckJSONSchema() { PostUserLoginMethod api = new PostUserLoginMethod(); api.expectResponseStatus(HttpResponseStatusType.OK_200); api.callAPI(); api.validateResponseAgainstJSONSchema( api/testdata/users/login/_post/rs.schema ); } Building requests with an array There are a couple of options for building a request with an array of items provided by the framework: 1. The first one uses hardcoded placeholders for changeable variables. { name : ${name} , description : ${description} , label : ${label} , taskTypes : [ { name : ${task_name_1} , description : ${task_description_1} } #if task_name_2?exists || task_description_2?exists , { name : ${task_name_2} , description : ${task_description_2} } /#if #if task_name_3?exists || task_description_3?exists , { name : ${task_name_3} , description : ${task_description_3} } /#if ] } As you see, this structure is quite flexible. If you need 2 taskTypes items, you need to declare at least task_name_2 or task_description_2 property. If you need 3 items in addition to that, you need to declare a task_name_3 or task_description_3 property. Otherwise, the array will contain only 1 item. For instance, you need to build JSON which contains a taskTypes array. Then the template with placeholders will be the following: It's easy to extend such a structure. You just need to add items with similar placeholders increasing their index. Another approach is based on using Freemarker loop. Here is the template example for the same JSON: #if task_name_1?exists #assign task_names = [task_name_1] #assign task_descriptions = [task_description_1] /#if #if task_name_2?exists #assign task_names = [task_name_1, task_name_2] #assign task_descriptions = [task_description_1, task_description_2] /#if #if task_name_3?exists #assign task_names = [task_name_1, task_name_2, task_name_3] #assign task_descriptions = [task_description_1, task_description_2, task_description_3] /#if { name : ${name} , description : ${description} , label : ${label} , taskTypes : [ #list 0..task_names?size-1 as i { name : ${task_names[i]} , description : ${task_descriptions[i]} } #if (i + 1) task_names?size , /#if /#list ] } This approach is useful when a structure of an array item is quite complex. So, it makes sense to specify the item attributes only once, doing it inside #list operation. This approach also allows to choose the amount of array items dynamically. But note that you should specify all properties for every item, so this view cannot be used for negative tests when you need to miss some properties. Validation of responses with an array Sometimes you can face a situation when you need to validate the presence of only one item (or a couple of them) in a JSON array ignoring the rest of the items. In such case, you can use a validation option ARRAY_CONTAINS. Here is the code sample: JSONAssert.assertEquals(expectedRs, actualRs, new JsonKeywordsComparator(JSONCompareMode.STRICT, JsonCompareKeywords.ARRAY_CONTAINS.getKey() + content )); The expected array: { totalElements : skip , pageNumber : skip , pageSize : skip , content : [ { id : skip, brand : skip , clientName : CLIENT 1 }, { id : skip , brand : skip , clientName : CLIENT 2 } ] } And the actual response: { totalElements : 1017, pageNumber : 0, pageSize : 100, content : [ { id : 11111, brand : test , clientName : CLIENT 1 }, { id : 22222, brand : test , clientName : CLIENT 2 }, { id : 3333, brand : test , clientName : CLIENT 3 }, { id : 4444, brand : test , clientName : CLIENT 4 } ] } Deserialization of JSON Sometimes you may need to transform your JSON response to POJO. It may be useful if you need to validate your response using the data from the database as the expected data. For this purpose, it's better to use Jackson libraries that are already included in Carina framework. For this you need to prepare the domain class based on your JSON structure. Some online resources provide such opportunities, like https://timboudreau.com/blog/json/read. Let's say we need to deserialize an array of Clients from JSON. An example of the required domain object will be: import org.codehaus.jackson.annotate.JsonCreator; import org.codehaus.jackson.annotate.JsonProperty; public final class Clients { public final Client clients[]; @JsonCreator public Clients(@JsonProperty( clients ) Client[] clients) { this.clients = clients; } public static final class Client { public final long id; public final String brand; public final String clientName; ...... @JsonCreator public Client(@JsonProperty( id ) long id, @JsonProperty( brand ) String brand, @JsonProperty( clientName ) String clientName,.....) { this.id = id; this.brand = brand; this.clientName = clientName; ......... } } public Client[] getClients() { return clients; } } Pay attention that POJO field names can differ from JSON properties. In this case, @JsonProperty annotation can be used for mapping. An example of a deserialization code: GetClientsMethod getClientsMethod = new GetClientsMethod( 11111 ); getClientsMethod.expectResponseStatus(HttpResponseStatusType.OK_200); String rs = getClientsMethod.callAPI().asString(); ObjectMapper mapper = new ObjectMapper(); Clients clients = mapper.readValue(rs, Clients.class); Then you can use POJO object for any kind of validation or for an easy retrieving of the required properties.","title":"API automation"},{"location":"automation/api/#introduction","text":"Rest API testing is a vital part of integration testing process, it may be used separately or together with web, mobile or DB testing. The general process may be described by the following steps: Compile an HTTP request with the required meta data Send the prepared data to the required server endpoint Validate the HTTP status and response data Extract some response data for the next requests Build a call to the next (or the same) endpoint using (or not using) the data from the previous response The schema below demonstrates the sequence: From this perspective, we decided to use the following instruments: Rest-assured - \"Testing and validation of REST services in Java are harder than in dynamic languages such as Ruby and Groovy. REST Assured brings the simplicity of using these languages into the Java domain.\" Freemarker - \"Apache FreeMarker is a template engine: a Java library to generate text output (HTML web pages, e-mails, configuration files, source code, etc.) based on templates and changing data.\" JsonPath - library for extracting data from JSON body JsonAssert - library for comparing the actual JSON body with an expected one Json-schema-validator - library for validating of JSON body for matching to JSON schema","title":"Introduction"},{"location":"automation/api/#example-of-test-implementation","text":"Let's create an automated test for the next call: POST https://jsonplaceholder.typicode.com/users request with a request body [ { id : 1, name : SOME_NAME , username : SOME_USERNAME , email : Sincere@april.biz , address : { street : Kulas Light , suite : Apt. 556 , city : Gwenborough , zipcode : 92998-3874 , geo : { lat : -37.3159 , lng : 81.1496 } }, phone : 1-770-736-8031 x56442 , website : hildegard.org , company : { name : SOME_COMPANY_NAME , catchPhrase : Multi-layered client-server neural-net , bs : harness real-time e-markets } } ] and the response body the same as the request body","title":"Example of test implementation"},{"location":"automation/api/#definition-of-request-and-response-templates","text":"If we are going to send POST request, we need to create a request template with some placeholders that may be replaced by different arguments for different test flows. The best place to store these resources is src/test/resources/api package, try to keep REST hierarchy in a package structure for better maintenance and visibility: Request (rq.json) and response (rs.json) templates have some placeholders that will be populated from the tests later on: While user.properties contains some default value which may be replaced later:","title":"Definition of request and response templates"},{"location":"automation/api/#rest-service-call-domain-object","text":"Now we are ready to create REST service domain object which will be used to interact with web service and perform additional response validations. Our domain object is located in /carina-demo/src/main/java/com/qaprosoft/carina/demo/api, make sure that it extends AbstractApiMethodV2 and triggers the base class constructor for initialization. In general cases, you will specify the path to request and response templates along with default properties files (all of them have been created in the previous step). Also, we replace the URL placeholder to set an appropriate environment. package com.qaprosoft.carina.demo.api; import com.qaprosoft.carina.core.foundation.api.AbstractApiMethodV2; import com.qaprosoft.carina.core.foundation.utils.Configuration; public class PostUserMethod extends AbstractApiMethodV2 { public PostUserMethod() { super( api/users/_post/rq.json , api/users/_post/rs.json , api/users/user.properties ); replaceUrlPlaceholder( base_url , Configuration.getEnvArg( api_url )); } }","title":"REST service call domain object"},{"location":"automation/api/#http-method-and-path","text":"The last step before the test implementation itself is the association of the domain object class and the required HTTP method and path. It should be defined in /carina-demo/src/main/resources/_api.properties file, the key should be equal to domain class name, the value has the following pattern {http_method}:{http_path}. The HTTP path may contain placeholders, the HTTP method should be one of the following variants: GET, POST, PUT, UPDATE, DELETE. #=====================================================# #=================== API methods ====================# #=====================================================# GetUserMethods=GET:${base_url}/users PostUserMethod=POST:${base_url}/users DeleteUserMethod=DELETE:${base_url}/users/1 PutPostsMethod=PUT:${base_url}/posts/1 PatchPostsMethod=PATCH:${base_url}/posts/1","title":"HTTP method and path"},{"location":"automation/api/#api-test","text":"API test is the general TestNG test, a class should extend APITest, in our case, the test extends it over AbstractTest that encapsulates some test data and login method. The test is located in /carina-demo/src/test/java/com/qaprosoft/carina/demo. package com.qaprosoft.carina.demo; import org.skyscreamer.jsonassert.JSONCompareMode; import org.testng.annotations.Test; import com.qaprosoft.apitools.validation.JsonCompareKeywords; import com.qaprosoft.carina.core.foundation.AbstractTest; import com.qaprosoft.carina.core.foundation.api.http.HttpResponseStatusType; import com.qaprosoft.carina.core.foundation.utils.ownership.MethodOwner; import com.qaprosoft.carina.demo.api.DeleteUserMethod; import com.qaprosoft.carina.demo.api.GetUserMethods; import com.qaprosoft.carina.demo.api.PostUserMethod; public class APISampleTest extends AbstractTest { @Test(description = JIRA#DEMO-0001 ) @MethodOwner(owner = qpsdemo ) public void testCreateUser() throws Exception { PostUserMethod api = new PostUserMethod(); api.expectResponseStatus(HttpResponseStatusType.CREATED_201); api.callAPI(); api.validateResponse(); } @Test(description = JIRA#DEMO-0002 ) @MethodOwner(owner = qpsdemo ) public void testCreateUserMissingSomeFields() throws Exception { PostUserMethod api = new PostUserMethod(); api.getProperties().remove( name ); api.getProperties().remove( username ); api.expectResponseStatus(HttpResponseStatusType.CREATED_201); api.callAPI(); api.validateResponse(); } @Test(description = JIRA#DEMO-0003 ) @MethodOwner(owner = qpsdemo ) public void testGetUsers() { GetUserMethods getUsersMethods = new GetUserMethods(); getUsersMethods.expectResponseStatus(HttpResponseStatusType.OK_200); getUsersMethods.callAPI(); getUsersMethods.validateResponse(JSONCompareMode.STRICT, JsonCompareKeywords.ARRAY_CONTAINS.getKey()); getUsersMethods.validateResponseAgainstJSONSchema( api/users/_get/rs.schema ); } }","title":"API test"},{"location":"automation/api/#test-steps-once-again","text":"Create REST call object Specify the properties for a request/response placeholder Add headers if required Specify the expected HTTP status Call API Validate the response by a template or parse some data by JSON path Make further calls using the data from the previous call if needed","title":"Test steps once again"},{"location":"automation/api/#useful-features","text":"The framework contains a list of useful features for requests building and for responses validation. It makes the support of such tests easier and at the same time minimizes the amount of test data.","title":"Useful features"},{"location":"automation/api/#wildcards","text":"In some cases, you may need to generate data in the request to make the request data unique. The best way to do this is to use wildcards for data generation: { username : generate_word(10) , // Will generate random alphanumeric string with 10 characters zip : generate_number(6) , // Will generate random number with 6 digits birthday : generate_date(yyyy-MM-dd;0) // Will generate current date (first arg is date format, second is delta in days from now) } Another option is to specify the placeholder in the request template and then pass some generated value directly from the test method. Another way of wildcards' usage is response validation. In some cases, you may need to skip some values or validate by regex: { id : skip , // Will skip actual value validation and just verify id key presence signup_date : regex:\\\\d{4}-\\\\d{2}-\\\\d{2} , // Will validate date value by specified regex }","title":"Wildcards"},{"location":"automation/api/#validation-against-json-schema","text":"When you need to validate response structure regardless of the actual values, you may use validation by JSON schema. In this case, you need an actual response from the service, let's say we have the following: { email : test@domain.com , firstName : SOME FIRST NAME , id : 11111 } Now we need to generate a schema (you may use any generator you like, for example, https://jsonschema.net/). IMPORTANT: For now, the schemas of version draft03 and draft04 are supported only. Please, use the appropriate generator (e.g. https://www.liquid-technologies.com/online-json-to-schema-converter) In the tool like this you need to provide the original JSON from the response, then choose some schema options (allow the additional properties in objects, mark the current object properties as required, hard-code some expected values, etc.) and then generate the schema. Copy-paste the generated schema into test resources, and you're ready to use it in the test. Make sure that you change all the flags required to true. After that, create a new file in the resources and place it into an appropriate endpoint package: { type : object , $schema : http://json-schema.org/draft-03/schema , id : http://jsonschema.net , required :true, properties :{ email : { type : string , id : http://jsonschema.net/email , required :true }, firstName : { type : string , id : http://jsonschema.net/firstName , required :true }, id : { type : number , id : http://jsonschema.net/id , required :true } } } And finally, we call JSON validation from Java test as the following: @Test public void testCheckJSONSchema() { PostUserLoginMethod api = new PostUserLoginMethod(); api.expectResponseStatus(HttpResponseStatusType.OK_200); api.callAPI(); api.validateResponseAgainstJSONSchema( api/testdata/users/login/_post/rs.schema ); }","title":"Validation against JSON schema"},{"location":"automation/api/#building-requests-with-an-array","text":"There are a couple of options for building a request with an array of items provided by the framework: 1. The first one uses hardcoded placeholders for changeable variables. { name : ${name} , description : ${description} , label : ${label} , taskTypes : [ { name : ${task_name_1} , description : ${task_description_1} } #if task_name_2?exists || task_description_2?exists , { name : ${task_name_2} , description : ${task_description_2} } /#if #if task_name_3?exists || task_description_3?exists , { name : ${task_name_3} , description : ${task_description_3} } /#if ] } As you see, this structure is quite flexible. If you need 2 taskTypes items, you need to declare at least task_name_2 or task_description_2 property. If you need 3 items in addition to that, you need to declare a task_name_3 or task_description_3 property. Otherwise, the array will contain only 1 item. For instance, you need to build JSON which contains a taskTypes array. Then the template with placeholders will be the following: It's easy to extend such a structure. You just need to add items with similar placeholders increasing their index. Another approach is based on using Freemarker loop. Here is the template example for the same JSON: #if task_name_1?exists #assign task_names = [task_name_1] #assign task_descriptions = [task_description_1] /#if #if task_name_2?exists #assign task_names = [task_name_1, task_name_2] #assign task_descriptions = [task_description_1, task_description_2] /#if #if task_name_3?exists #assign task_names = [task_name_1, task_name_2, task_name_3] #assign task_descriptions = [task_description_1, task_description_2, task_description_3] /#if { name : ${name} , description : ${description} , label : ${label} , taskTypes : [ #list 0..task_names?size-1 as i { name : ${task_names[i]} , description : ${task_descriptions[i]} } #if (i + 1) task_names?size , /#if /#list ] } This approach is useful when a structure of an array item is quite complex. So, it makes sense to specify the item attributes only once, doing it inside #list operation. This approach also allows to choose the amount of array items dynamically. But note that you should specify all properties for every item, so this view cannot be used for negative tests when you need to miss some properties.","title":"Building requests with an array"},{"location":"automation/api/#validation-of-responses-with-an-array","text":"Sometimes you can face a situation when you need to validate the presence of only one item (or a couple of them) in a JSON array ignoring the rest of the items. In such case, you can use a validation option ARRAY_CONTAINS. Here is the code sample: JSONAssert.assertEquals(expectedRs, actualRs, new JsonKeywordsComparator(JSONCompareMode.STRICT, JsonCompareKeywords.ARRAY_CONTAINS.getKey() + content )); The expected array: { totalElements : skip , pageNumber : skip , pageSize : skip , content : [ { id : skip, brand : skip , clientName : CLIENT 1 }, { id : skip , brand : skip , clientName : CLIENT 2 } ] } And the actual response: { totalElements : 1017, pageNumber : 0, pageSize : 100, content : [ { id : 11111, brand : test , clientName : CLIENT 1 }, { id : 22222, brand : test , clientName : CLIENT 2 }, { id : 3333, brand : test , clientName : CLIENT 3 }, { id : 4444, brand : test , clientName : CLIENT 4 } ] }","title":"Validation of responses with an array"},{"location":"automation/api/#deserialization-of-json","text":"Sometimes you may need to transform your JSON response to POJO. It may be useful if you need to validate your response using the data from the database as the expected data. For this purpose, it's better to use Jackson libraries that are already included in Carina framework. For this you need to prepare the domain class based on your JSON structure. Some online resources provide such opportunities, like https://timboudreau.com/blog/json/read. Let's say we need to deserialize an array of Clients from JSON. An example of the required domain object will be: import org.codehaus.jackson.annotate.JsonCreator; import org.codehaus.jackson.annotate.JsonProperty; public final class Clients { public final Client clients[]; @JsonCreator public Clients(@JsonProperty( clients ) Client[] clients) { this.clients = clients; } public static final class Client { public final long id; public final String brand; public final String clientName; ...... @JsonCreator public Client(@JsonProperty( id ) long id, @JsonProperty( brand ) String brand, @JsonProperty( clientName ) String clientName,.....) { this.id = id; this.brand = brand; this.clientName = clientName; ......... } } public Client[] getClients() { return clients; } } Pay attention that POJO field names can differ from JSON properties. In this case, @JsonProperty annotation can be used for mapping. An example of a deserialization code: GetClientsMethod getClientsMethod = new GetClientsMethod( 11111 ); getClientsMethod.expectResponseStatus(HttpResponseStatusType.OK_200); String rs = getClientsMethod.callAPI().asString(); ObjectMapper mapper = new ObjectMapper(); Clients clients = mapper.readValue(rs, Clients.class); Then you can use POJO object for any kind of validation or for an easy retrieving of the required properties.","title":"Deserialization of JSON"},{"location":"automation/mobile/","text":"Carina framework provides a useful and elegant way of Mobile (Android and iOS) Test Automation. The best practices have a lot in common with web automation, so it\u2019s highly recommended to look through Web automation article . Mobile special requirements: To run mobile tests, Appium is used instead of Selenium. There are 2 versions of Appium: desktop and console ones, and both are good for Carina. Appium must be running every time before the test run. Android special requirements: Android SDK (part of Android Studio ) is an important component for work. Pay attention that after installing Android Studio you sometimes (depends on the version) need to additionally install ADB and aapt (for Mac only). Edit your PATH variable and add ANDROID_HOME (path to \u201csdk\u201d folder) to PATH. Hint: you sometimes (especially on Mac) need to add paths to important folders inside sdk, such as \u201cplatform-tools\u201d (ADB is located here), \u201ctools\u201d and \u201cbuild-tools\u201d (aapt is located here). .apk file - installation file of a program that\u2019s being tested is required, the same for both - the real device and the emulator. iOS special requirements: Xcode is a vital component for work, but unfortunately, it\u2019s Mac-used only. It\u2019s impossible to do iOS automation on Windows. Installation file of a program that\u2019s being tested is required. For the real device it\u2019s .ipa file, and for the simulator it\u2019s .app file. .app file should be provided by developers and has special signatures to work correctly, but automation on the simulator is free. On the other hand, the license is needed to work with the real device. Mobile config properties We could provide any Appium capability in the config.properties file using capabilities.name=value format. In the table below we are providing the description of the most popular mobile capabilities: Attribute Meaning Default value Example capabilities.deviceName Device name for report n/a Sumsung_Galaxy_J5 capabilities.deviceType The only custom Carina capability to determine the type of the device n/a phone/tablet/tv... capabilities.platformName Name of the mobile platform n/a Android/iOS/AndroidTV/tvOS capabilities.platformVersion Version of the mobile platform n/a 6.0.1 capabilities.automationName Name of the program used for automation (for Android 7+ use uiautomator2 instead of Appium) n/a Appium/uiautomator2/XCUITest capabilities.app Path to the application (apk/app/ipa) which is tested, can be provided as a pattern from AWS S3 storage with automatic downloading n/a D:/application.apk, s3://qaprosoft.com/android/myapk.*-release.apk capabilities.newCommandTimeout New implicit timeout is seconds to wait for the element for mobile automation n/a 180 capabilities.udid Unique Device ID n/a 759b543c capabilities.device Specifies a particular mobile device for the test environment on Browserstack n/a Galaxy Note 8, iPhone X capabilities.os_version Version of OS for Browserstack n/a ios, android capabilities.remoteURL Remote URL for using Selenium Grid n/a 'http://localhost:4444/wd/hub' capabilities.appActivity Activity name for the Android activity you want to launch from your package. n/a com.amazon.mShop.HomeActivity capabilities.appPackage Java package of the Android app you want to run n/a in.amazon.mShop.android.shopping capabilities.noSign Skips checking and signing of the app with debug keys, will work only with UiAutomator and not with selendroid, defaults to false n/a true, false capabilities.autoGrantPermissions Has Appium automatically determine which permissions your app requires and grants them to the app on install. Defaults to false n/a true, false capabilities.skipUnlock Skips the device unlock process. Defaults to false n/a true, false Important: though it\u2019s not necessary to run Selenium, seleniumum_host must be defined. The file _config.properties should be located in src/main/resources Example for Android of _config.properties: #=====================================================# #================= Configuration v2 ==================# #=====================================================# selenium_host=http://localhost:4723/wd/hub extra_selenium_driver_host=http://localhost:4444/wd/hub #============ Android Local Mobile ===================# ##for Android 7+ use uiautomator2 instead of Appium capabilities.automationName=uiautomator2 capabilities.appPackage= capabilities.deviceName=Nexus_6 capabilities.udid=emulator-5554 capabilities.noSign=true capabilities.deviceType=phone capabilities.app=/Users/{user}/qaprosoft/mmf/test-app.apk capabilities.platformName=ANDROID capabilities.autoGrantPermissions=true #=====================================================# Note: To get the device\u2019s unique id (UDID), the command \u201cadb devices\u201d is used. This command provides a list of devices attached with their UDIDs. For the real device it will look like \u201c759b543c\u201d (can be shorter or longer), and for the emulator it will be like \u201cemulator-5554\u201d. Example for iOS of _config.properties: #=====================================================# #================= Configuration v2 ==================# #=====================================================# selenium_host=http://localhost:4723/wd/hub extra_selenium_driver_host=http://localhost:4444/wd/hub #======== Local Run for iOS Mobile ===============# capabilities.app=/Users/{user}/qaprosoft/mmf/TestApp-iphonesimulator.app capabilities.platformName=iOS capabilities.deviceName=iPhone X capabilities.platform=iOS capabilities.deviceType=phone capabilities.platformVersion=11.4 capabilities.automationName=XCUITest capabilities.udid=D85FF1CD-D95F-4B78-A007-77A11EBD3ABB capabilities.newCommandTimeout=1800 #=====================================================# Note: To get the device\u2019s unique id (UDID) for the emulator, the command \u201cxcrun simctl list\u201d is used. It will show the list of simulators with their names, iOS versions, udids and statuses (shutdown or booted). To get UDID from the real device, you need to plug your phone into a computer and copy it out of iTunes: 1. Launch iTunes and connect your iPhone. 2. In the right panel, locate the information about your iPhone, including its name, capacity, software version, serial number, and phone number. 3. Reveal the Identifier by clicking on the Serial Number. Implementation of Page Objects: The main idea is the same as in web-testing except that CSS isn\u2019t used in Mobile. ExtendedWebElement (Carina\u2019s implementation of WebElement) is used instead of WebElement, and it has methods similar to those that WebElement has, but more reliable and convenient ones. Important : * Page should extend com.qaprosoft.carina.core.gui.AbstractPage * Use com.qaprosoft.carina.core.foundation.webdriver.decorator.ExtendedWebElement instead of Selenium WebElement * Locate Page Object classes in src/main/java package How to find locators for Android application To obtain the locators of web elements from an Android app, different programs are used, such as the latest Appium itself and a convenient Android SDK tool: uiautomatorviewer. It\u2019s located in $ANDROID_HOME/tools/bin and can be launched using the command line (./uiautomatorviewer). Example: @FindBy(xpath = //*[@resource-id='name_input'] ) private ExtendedWebElement input; How to find locators for iOS application To obtain the locators of web elements from an iOS app, different programs are used, such as GUI Appium itself and a convenient Macaca App Inspector . To speed up the work, @Predicate is used. Complicate \u201cxpaths\u201d can\u2019t be used with predicates, but \u201cid\u201d, \u201cname\u201d, \u201cclassName\u201d and etc. search is sufficient. Example: @FindBy(xpath = name = 'DONE' ) @Predicate protected ExtendedWebElement doneButton; Another possibility to find the element is to use @ClassChain annotation. Example: @FindBy(xpath = **/XCUIElementTypeStaticText[`name=='Developer'`] ) @ClassChain protected ExtendedWebElement developerText; Starting from Carina version 6.0.12, it's recommended to use @ExtendedFindBy() annotation. Example: @ExtendedFindBy(iosClassChain = **/XCUIElementTypeStaticText[`name=='Developer'`] ) protected ExtendedWebElement developerText; or @ExtendedFindBy(iosPredicate = name = 'DONE' ) protected ExtendedWebElement developerText; Implementation of tests Carina framework uses TestNG for test organization. In general, test represents a manipulation with Page Objects and additional validations of UI events. Here is a sample test implementation: public class SampleTest extends AbstractTest { String name = My name ; String carName = Mercedes ; @Test() public void sendName() { FirstPage firstPage = new FirstPage(getDriver()); GoogleTestPage googleTestPage = new GoogleTestPage(getDriver()); MyWayOfHelloPage myWayOfHelloPage = new MyWayOfHelloPage(getDriver()); firstPage.clickOnGooleButton(); googleTestPage.setName(name); googleTestPage.clickOnSpinner(); googleTestPage.selectCar(carName); googleTestPage.clickOnSendYourNameButton(); Assert.assertTrue(myWayOfHelloPage.isTextElementPresent(name), \u201cAssert message\u201d ); Assert.assertTrue(myWayOfHelloPage.isTextElementPresent(carName.toLowerCase()), \u201cAssert message\u201d ); } } Important: Test class should extend com.qaprosoft.carina.core.foundation.AbstractTest Test method should start with org.testng.annotations.Test annotation Use getDriver() method to get driver instance in test Locate tests in src/test/java source folder How to use CustomTypePageFactory Carina provides the technique to combine Desktop/iOS/Android tests into the single test class/method. For all platforms you should use Page Object Design Pattern , but in a bit improved way. Every page has an abstract declaration and different implementations if needed (by default, 3 ones should be enough: Desktop, iOS/Android): Common abstract page in a common package with common methods and elements; Desktop page in a desktop package with desktop methods and elements; iOS page in ios package with iOS methods and elements; Android page in android package with Android methods and elements. Child pages should extend BasePage implementing all abstract methods. Annotation @DeviceType will provide the information about the device type and the parent (common) page. Examples: Common (Base) Page public abstract class HomePageBase extends AbstractPage { public HomePageBase(WebDriver driver) { super(driver); } public abstract PhoneFinderPageBase openPhoneFinder(); public abstract ComparePageBase openComparePage(); } Android Page @DeviceType(pageType = DeviceType.Type.ANDROID_PHONE, parentClass = HomePageBase.class) public class HomePage extends HomePageBase { @FindBy(xpath = //android.widget.TextView[@resource-id='itemTitle' and @text='Phone Finder'] ) protected ExtendedWebElement phoneFinderTextView; @FindBy(xpath = //android.widget.TextView[@resource-id='itemTitle' and @text='compare'] ) protected ExtendedWebElement compareTextView; public HomePage(WebDriver driver) { super(driver); } @Override public PhoneFinderPageBase openPhoneFinder() { phoneFinderTextView.click(); return CustomTypePageFactory.initPage(getDriver(), PhoneFinderPageBase.class); } @Override public ComparePageBase openComparePage() { compareTextView.click(); return CustomTypePageFactory.initPage(getDriver(), ComparePageBase.class); } iOS Page @DeviceType(pageType = Type.IOS_PHONE, parentClass = HomePageBase.class) public class HomePage extends HomePageBase { @FindBy(xpath = name = 'Phone Finder' ) @Predicate private ExtendedWebElement phoneFinderTextView; @FindBy(xpath = name = 'Compare' ) @Predicate private ExtendedWebElement compareTextView; public HomePage(WebDriver driver) { super(driver); } @Override public PhoneFinderPageBase openPhoneFinder() { phoneFinderTextView.click(); return CustomTypePageFactory.initPage(getDriver(), PhoneFinderPageBase.class); } @Override public ComparePageBase openComparePage() { compareTextView.click(); return CustomTypePageFactory.initPage(getDriver(), ComparePageBase.class); } Inside every test Carina operates with an abstract base page using CustomTypePageFactory and substitutes it by the real implementation based on the desired capabilities in _config.properties etc. Example: @Test public void comparePhonesTest() { HomePageBase homePage = CustomTypePageFactory.initPage(getDriver(), HomePageBase.class); ComparePageBase phoneFinderPage = homePage.openCompare(); ... } If there are differences in application according to OS version, just implement the pages for different versions and include the version parameter in @DeviceType for every page. Example: For Android 8 (either 8.0 or 8.1) @DeviceType(pageType = DeviceType.Type.ANDROID_PHONE, version = \u201c8\u201d, parentClass = HomePageBase.class) public class HomePage extends HomePageBase { Or for a specific version @DeviceType(pageType = DeviceType.Type.ANDROID_PHONE, version = \u201c8.1\u201d, parentClass = HomePageBase.class) public class HomePage extends HomePageBase { How to use Find by image strategy Find by image strategy is based on appium implementation . Be sure you have openCV libraries installed to your system . Find by image logic is covered by @ExtendedFindBy annotation. Example: @ExtendedFindBy(image = images/singUp6.png ) private ExtendedWebElement signUpBtn; The list of actions with image elements and related driver settings is available here . Basically, all you need is to create an image template of the element in .png format and place it to your project. We suggest using src/main/resources/ folder to store images. Be sure your image size is less than the real screen size. The real iOS screen sizes are listed here in 'UIKit Size (Points)' column. You can also find the ultimate guide to iPhone resolutions here .","title":"Mobile automation"},{"location":"automation/mobile/#mobile-special-requirements","text":"To run mobile tests, Appium is used instead of Selenium. There are 2 versions of Appium: desktop and console ones, and both are good for Carina. Appium must be running every time before the test run.","title":"Mobile special requirements:"},{"location":"automation/mobile/#android-special-requirements","text":"Android SDK (part of Android Studio ) is an important component for work. Pay attention that after installing Android Studio you sometimes (depends on the version) need to additionally install ADB and aapt (for Mac only). Edit your PATH variable and add ANDROID_HOME (path to \u201csdk\u201d folder) to PATH. Hint: you sometimes (especially on Mac) need to add paths to important folders inside sdk, such as \u201cplatform-tools\u201d (ADB is located here), \u201ctools\u201d and \u201cbuild-tools\u201d (aapt is located here). .apk file - installation file of a program that\u2019s being tested is required, the same for both - the real device and the emulator.","title":"Android special requirements:"},{"location":"automation/mobile/#ios-special-requirements","text":"Xcode is a vital component for work, but unfortunately, it\u2019s Mac-used only. It\u2019s impossible to do iOS automation on Windows. Installation file of a program that\u2019s being tested is required. For the real device it\u2019s .ipa file, and for the simulator it\u2019s .app file. .app file should be provided by developers and has special signatures to work correctly, but automation on the simulator is free. On the other hand, the license is needed to work with the real device.","title":"iOS special requirements:"},{"location":"automation/mobile/#mobile-config-properties","text":"We could provide any Appium capability in the config.properties file using capabilities.name=value format. In the table below we are providing the description of the most popular mobile capabilities: Attribute Meaning Default value Example capabilities.deviceName Device name for report n/a Sumsung_Galaxy_J5 capabilities.deviceType The only custom Carina capability to determine the type of the device n/a phone/tablet/tv... capabilities.platformName Name of the mobile platform n/a Android/iOS/AndroidTV/tvOS capabilities.platformVersion Version of the mobile platform n/a 6.0.1 capabilities.automationName Name of the program used for automation (for Android 7+ use uiautomator2 instead of Appium) n/a Appium/uiautomator2/XCUITest capabilities.app Path to the application (apk/app/ipa) which is tested, can be provided as a pattern from AWS S3 storage with automatic downloading n/a D:/application.apk, s3://qaprosoft.com/android/myapk.*-release.apk capabilities.newCommandTimeout New implicit timeout is seconds to wait for the element for mobile automation n/a 180 capabilities.udid Unique Device ID n/a 759b543c capabilities.device Specifies a particular mobile device for the test environment on Browserstack n/a Galaxy Note 8, iPhone X capabilities.os_version Version of OS for Browserstack n/a ios, android capabilities.remoteURL Remote URL for using Selenium Grid n/a 'http://localhost:4444/wd/hub' capabilities.appActivity Activity name for the Android activity you want to launch from your package. n/a com.amazon.mShop.HomeActivity capabilities.appPackage Java package of the Android app you want to run n/a in.amazon.mShop.android.shopping capabilities.noSign Skips checking and signing of the app with debug keys, will work only with UiAutomator and not with selendroid, defaults to false n/a true, false capabilities.autoGrantPermissions Has Appium automatically determine which permissions your app requires and grants them to the app on install. Defaults to false n/a true, false capabilities.skipUnlock Skips the device unlock process. Defaults to false n/a true, false Important: though it\u2019s not necessary to run Selenium, seleniumum_host must be defined. The file _config.properties should be located in src/main/resources","title":"Mobile config properties"},{"location":"automation/mobile/#example-for-android-of-_configproperties","text":"#=====================================================# #================= Configuration v2 ==================# #=====================================================# selenium_host=http://localhost:4723/wd/hub extra_selenium_driver_host=http://localhost:4444/wd/hub #============ Android Local Mobile ===================# ##for Android 7+ use uiautomator2 instead of Appium capabilities.automationName=uiautomator2 capabilities.appPackage= capabilities.deviceName=Nexus_6 capabilities.udid=emulator-5554 capabilities.noSign=true capabilities.deviceType=phone capabilities.app=/Users/{user}/qaprosoft/mmf/test-app.apk capabilities.platformName=ANDROID capabilities.autoGrantPermissions=true #=====================================================# Note: To get the device\u2019s unique id (UDID), the command \u201cadb devices\u201d is used. This command provides a list of devices attached with their UDIDs. For the real device it will look like \u201c759b543c\u201d (can be shorter or longer), and for the emulator it will be like \u201cemulator-5554\u201d.","title":"Example for Android of _config.properties:"},{"location":"automation/mobile/#example-for-ios-of-_configproperties","text":"#=====================================================# #================= Configuration v2 ==================# #=====================================================# selenium_host=http://localhost:4723/wd/hub extra_selenium_driver_host=http://localhost:4444/wd/hub #======== Local Run for iOS Mobile ===============# capabilities.app=/Users/{user}/qaprosoft/mmf/TestApp-iphonesimulator.app capabilities.platformName=iOS capabilities.deviceName=iPhone X capabilities.platform=iOS capabilities.deviceType=phone capabilities.platformVersion=11.4 capabilities.automationName=XCUITest capabilities.udid=D85FF1CD-D95F-4B78-A007-77A11EBD3ABB capabilities.newCommandTimeout=1800 #=====================================================# Note: To get the device\u2019s unique id (UDID) for the emulator, the command \u201cxcrun simctl list\u201d is used. It will show the list of simulators with their names, iOS versions, udids and statuses (shutdown or booted). To get UDID from the real device, you need to plug your phone into a computer and copy it out of iTunes: 1. Launch iTunes and connect your iPhone. 2. In the right panel, locate the information about your iPhone, including its name, capacity, software version, serial number, and phone number. 3. Reveal the Identifier by clicking on the Serial Number.","title":"Example for iOS of _config.properties:"},{"location":"automation/mobile/#implementation-of-page-objects","text":"The main idea is the same as in web-testing except that CSS isn\u2019t used in Mobile. ExtendedWebElement (Carina\u2019s implementation of WebElement) is used instead of WebElement, and it has methods similar to those that WebElement has, but more reliable and convenient ones. Important : * Page should extend com.qaprosoft.carina.core.gui.AbstractPage * Use com.qaprosoft.carina.core.foundation.webdriver.decorator.ExtendedWebElement instead of Selenium WebElement * Locate Page Object classes in src/main/java package","title":"Implementation of Page Objects:"},{"location":"automation/mobile/#how-to-find-locators-for-android-application","text":"To obtain the locators of web elements from an Android app, different programs are used, such as the latest Appium itself and a convenient Android SDK tool: uiautomatorviewer. It\u2019s located in $ANDROID_HOME/tools/bin and can be launched using the command line (./uiautomatorviewer). Example: @FindBy(xpath = //*[@resource-id='name_input'] ) private ExtendedWebElement input;","title":"How to find locators for Android application"},{"location":"automation/mobile/#how-to-find-locators-for-ios-application","text":"To obtain the locators of web elements from an iOS app, different programs are used, such as GUI Appium itself and a convenient Macaca App Inspector . To speed up the work, @Predicate is used. Complicate \u201cxpaths\u201d can\u2019t be used with predicates, but \u201cid\u201d, \u201cname\u201d, \u201cclassName\u201d and etc. search is sufficient. Example: @FindBy(xpath = name = 'DONE' ) @Predicate protected ExtendedWebElement doneButton; Another possibility to find the element is to use @ClassChain annotation. Example: @FindBy(xpath = **/XCUIElementTypeStaticText[`name=='Developer'`] ) @ClassChain protected ExtendedWebElement developerText; Starting from Carina version 6.0.12, it's recommended to use @ExtendedFindBy() annotation. Example: @ExtendedFindBy(iosClassChain = **/XCUIElementTypeStaticText[`name=='Developer'`] ) protected ExtendedWebElement developerText; or @ExtendedFindBy(iosPredicate = name = 'DONE' ) protected ExtendedWebElement developerText;","title":"How to find locators for iOS application"},{"location":"automation/mobile/#implementation-of-tests","text":"Carina framework uses TestNG for test organization. In general, test represents a manipulation with Page Objects and additional validations of UI events. Here is a sample test implementation: public class SampleTest extends AbstractTest { String name = My name ; String carName = Mercedes ; @Test() public void sendName() { FirstPage firstPage = new FirstPage(getDriver()); GoogleTestPage googleTestPage = new GoogleTestPage(getDriver()); MyWayOfHelloPage myWayOfHelloPage = new MyWayOfHelloPage(getDriver()); firstPage.clickOnGooleButton(); googleTestPage.setName(name); googleTestPage.clickOnSpinner(); googleTestPage.selectCar(carName); googleTestPage.clickOnSendYourNameButton(); Assert.assertTrue(myWayOfHelloPage.isTextElementPresent(name), \u201cAssert message\u201d ); Assert.assertTrue(myWayOfHelloPage.isTextElementPresent(carName.toLowerCase()), \u201cAssert message\u201d ); } } Important: Test class should extend com.qaprosoft.carina.core.foundation.AbstractTest Test method should start with org.testng.annotations.Test annotation Use getDriver() method to get driver instance in test Locate tests in src/test/java source folder","title":"Implementation of tests"},{"location":"automation/mobile/#how-to-use-customtypepagefactory","text":"Carina provides the technique to combine Desktop/iOS/Android tests into the single test class/method. For all platforms you should use Page Object Design Pattern , but in a bit improved way. Every page has an abstract declaration and different implementations if needed (by default, 3 ones should be enough: Desktop, iOS/Android): Common abstract page in a common package with common methods and elements; Desktop page in a desktop package with desktop methods and elements; iOS page in ios package with iOS methods and elements; Android page in android package with Android methods and elements. Child pages should extend BasePage implementing all abstract methods. Annotation @DeviceType will provide the information about the device type and the parent (common) page. Examples: Common (Base) Page public abstract class HomePageBase extends AbstractPage { public HomePageBase(WebDriver driver) { super(driver); } public abstract PhoneFinderPageBase openPhoneFinder(); public abstract ComparePageBase openComparePage(); } Android Page @DeviceType(pageType = DeviceType.Type.ANDROID_PHONE, parentClass = HomePageBase.class) public class HomePage extends HomePageBase { @FindBy(xpath = //android.widget.TextView[@resource-id='itemTitle' and @text='Phone Finder'] ) protected ExtendedWebElement phoneFinderTextView; @FindBy(xpath = //android.widget.TextView[@resource-id='itemTitle' and @text='compare'] ) protected ExtendedWebElement compareTextView; public HomePage(WebDriver driver) { super(driver); } @Override public PhoneFinderPageBase openPhoneFinder() { phoneFinderTextView.click(); return CustomTypePageFactory.initPage(getDriver(), PhoneFinderPageBase.class); } @Override public ComparePageBase openComparePage() { compareTextView.click(); return CustomTypePageFactory.initPage(getDriver(), ComparePageBase.class); } iOS Page @DeviceType(pageType = Type.IOS_PHONE, parentClass = HomePageBase.class) public class HomePage extends HomePageBase { @FindBy(xpath = name = 'Phone Finder' ) @Predicate private ExtendedWebElement phoneFinderTextView; @FindBy(xpath = name = 'Compare' ) @Predicate private ExtendedWebElement compareTextView; public HomePage(WebDriver driver) { super(driver); } @Override public PhoneFinderPageBase openPhoneFinder() { phoneFinderTextView.click(); return CustomTypePageFactory.initPage(getDriver(), PhoneFinderPageBase.class); } @Override public ComparePageBase openComparePage() { compareTextView.click(); return CustomTypePageFactory.initPage(getDriver(), ComparePageBase.class); } Inside every test Carina operates with an abstract base page using CustomTypePageFactory and substitutes it by the real implementation based on the desired capabilities in _config.properties etc. Example: @Test public void comparePhonesTest() { HomePageBase homePage = CustomTypePageFactory.initPage(getDriver(), HomePageBase.class); ComparePageBase phoneFinderPage = homePage.openCompare(); ... } If there are differences in application according to OS version, just implement the pages for different versions and include the version parameter in @DeviceType for every page. Example: For Android 8 (either 8.0 or 8.1) @DeviceType(pageType = DeviceType.Type.ANDROID_PHONE, version = \u201c8\u201d, parentClass = HomePageBase.class) public class HomePage extends HomePageBase { Or for a specific version @DeviceType(pageType = DeviceType.Type.ANDROID_PHONE, version = \u201c8.1\u201d, parentClass = HomePageBase.class) public class HomePage extends HomePageBase {","title":"How to use CustomTypePageFactory"},{"location":"automation/mobile/#how-to-use-find-by-image-strategy","text":"Find by image strategy is based on appium implementation . Be sure you have openCV libraries installed to your system . Find by image logic is covered by @ExtendedFindBy annotation. Example: @ExtendedFindBy(image = images/singUp6.png ) private ExtendedWebElement signUpBtn; The list of actions with image elements and related driver settings is available here . Basically, all you need is to create an image template of the element in .png format and place it to your project. We suggest using src/main/resources/ folder to store images. Be sure your image size is less than the real screen size. The real iOS screen sizes are listed here in 'UIKit Size (Points)' column. You can also find the ultimate guide to iPhone resolutions here .","title":"How to use Find by image strategy"},{"location":"automation/web/","text":"Carina framework follows Selenium best practices for web test automation. If you are familiar with Selenium WebDriver and have already implemented a few tests with the Page Object Pattern, the following guide will be much easier for understanding. We have chosen GSM Arena public web site for demonstration purposes, the whole test source code is located in carina-demo Github repo. Implementation of Page Objects When you are writing functional tests using Selenium, the major part of your code will consist of interactions with the web interface you are testing through the WebDriver API. After fetching elements, you will verify some state of the element through various assertions and move on to fetching the next element. You may find WebElements directly in your tests: List WebElement zipCodes = driver.findElements(By.id( zipCodes )); for (WebElement zipCode : zipCodes) { if (zipCode.getText().equals( 12345 )){ zipCode.click(); break; } } WebElement city = driver.findElement(By.id( city )); assertEquals( MyCityName , city.getText()); Some of the typical problems for this type of Selenium test are: Test cases are difficult to read Changes in the UI break multiple tests, often in several places Duplication of selectors both inside and across tests - no reuse So, instead of having each test fetch elements directly and being fragile towards the UI changes, the Page Object Pattern introduces what is basically a decoupling layer. You create an object that represents the UI you want to test, which can be a whole page or a significant part of it. The responsibility of this object is to wrap HTML elements and encapsulate interactions with the UI, meaning that this is where all calls to WebDriver will go. This is where most WebElements are. And this is the only place you need to modify when the UI changes. In general, Page Object contains locators of the elements situated on the page and some business logic that may be reused by different tests: public class ModelInfoPage extends AbstractPage { @FindBy(css = .help-display strong ) private ExtendedWebElement displayInfoLabel; @FindBy(css = .help-camera strong ) private ExtendedWebElement cameraInfoLabel; @FindBy(css = .help-expansion strong ) private ExtendedWebElement displayRamLabel; @FindBy(css = .help-battery strong ) private ExtendedWebElement batteryInfoLabel; public ModelInfoPage(WebDriver driver) { super(driver); } public String readDisplay() { assertElementPresent(displayInfoLabel); return displayInfoLabel.getText(); } public String readCamera() { assertElementPresent(cameraInfoLabel); return cameraInfoLabel.getText(); } public String readRam() { assertElementPresent(displayRamLabel); return displayRamLabel.getText(); } public String readBattery() { assertElementPresent(displayInfoLabel); return batteryInfoLabel.getText(); } } Important: Page should extend com.qaprosoft.carina.core.gui.AbstractPage Use com.qaprosoft.carina.core.foundation.webdriver.decorator.ExtendedWebElement instead of Selenium WebElement Locate Page Object classes in src/main/java Implementation of UI Components In some cases, it is useful to implement UI Objects that may be reused between multiple Page Objects. For instance, a top menu or footer may be shared between multiple pages: public class FooterMenu extends AbstractUIObject { @FindBy(linkText = Home ) private ExtendedWebElement homeLink; @FindBy(linkText = Compare ) private ExtendedWebElement compareLink; public FooterMenu(WebDriver driver, SearchContext searchContext) { super(driver, searchContext); } public HomePage openHomePage() { homeLink.click(); return new HomePage(driver); } public CompareModelsPage openComparePage() { compareLink.click(); return new CompareModelsPage(driver); } } And then you can use this in Page Object: public class HomePage extends AbstractPage { @FindBy(id = footmenu ) private FooterMenu footerMenu; @FindBy(xpath = //div[contains(@class, 'brandmenu-v2')]//a ) private List ExtendedWebElement brandLinks; public HomePage(WebDriver driver) { super(driver); } public FooterMenu getFooterMenu() { return footerMenu; } public BrandModelsPage selectBrand(String brand) { LOGGER.info( selecting ' + brand + ' brand... ); for (ExtendedWebElement brandLink : brandLinks) { String currentBrand = brandLink.getText(); LOGGER.info( currentBrand: + currentBrand); if (brand.equalsIgnoreCase(currentBrand)) { brandLink.click(); return new BrandModelsPage(driver); } } throw new RuntimeException( Unable to open brand: + brand); } } Important: UI Object should extend com.qaprosoft.carina.core.gui.AbstractUIObject You should call the super constructor super(driver, searchContext) where searchContext is an instance of org.openqa.selenium.SearchContext Locate UI Object classes in src/main/java source folder Implementation of tests Carina framework uses TestNG for test organization. In general, test represents a manipulation with Page Objects and additional validations of UI events. Here is a sample test implementation: public class WebSampleTest extends AbstractTest { @Test(description = JIRA#AUTO-0009 ) @MethodOwner(owner = qpsdemo ) public void testCompareModels() { // Open GSM Arena home page and verify page is opened HomePage homePage = new HomePage(getDriver()); homePage.open(); Assert.assertTrue(homePage.isPageOpened(), Home page is not opened ); // Open model compare page FooterMenu footerMenu = homePage.getFooterMenu(); Assert.assertTrue(footerMenu.isUIObjectPresent(2), Footer menu wasn't found! ); CompareModelsPage comparePage = footerMenu.openComparePage(); // Compare 3 models List ModelSpecs specs = comparePage.compareModels( Samsung Galaxy J3 , Samsung Galaxy J5 , Samsung Galaxy J7 Pro ); // Verify model announced dates Assert.assertEquals(specs.get(0).readSpec(SpecType.ANNOUNCED), 2015, November ); Assert.assertEquals(specs.get(1).readSpec(SpecType.ANNOUNCED), 2016, September ); Assert.assertEquals(specs.get(2).readSpec(SpecType.ANNOUNCED), 2017, June ); } } It is good practice to implement all elements search logic of Page Object/UI Object side and perform assertions and validations in the test, do not mix this logic. Important: Test class should extend com.qaprosoft.carina.core.foundation.AbstractTest Test method should start with org.testng.annotations.Test annotation Use getDriver() method to get driver instance in the test Locate tests in src/test/java source folder Test configuration There are a few critical properties in a config.properties file which are required for web test execution: url=http://www.gsmarena.com platform=* browser=chrome browser_version=* The implemented test cases should be placed in a TestNG xml file according to the test group the test belongs to. You can find more details about TestNG configuration in the official documentation . !DOCTYPE suite SYSTEM http://testng.org/testng-1.0.dtd suite verbose= 1 name= Carina Demo Tests - Web tests skipfailedinvocationcounts= false junit= false parallel= tests data-provider-thread-count= 50 annotations= JDK test name= GSM arena web tests classes class name= com.qaprosoft.carina.demo.WebSampleTest / /classes /test /suite","title":"Web automation"},{"location":"automation/web/#implementation-of-page-objects","text":"When you are writing functional tests using Selenium, the major part of your code will consist of interactions with the web interface you are testing through the WebDriver API. After fetching elements, you will verify some state of the element through various assertions and move on to fetching the next element. You may find WebElements directly in your tests: List WebElement zipCodes = driver.findElements(By.id( zipCodes )); for (WebElement zipCode : zipCodes) { if (zipCode.getText().equals( 12345 )){ zipCode.click(); break; } } WebElement city = driver.findElement(By.id( city )); assertEquals( MyCityName , city.getText()); Some of the typical problems for this type of Selenium test are: Test cases are difficult to read Changes in the UI break multiple tests, often in several places Duplication of selectors both inside and across tests - no reuse So, instead of having each test fetch elements directly and being fragile towards the UI changes, the Page Object Pattern introduces what is basically a decoupling layer. You create an object that represents the UI you want to test, which can be a whole page or a significant part of it. The responsibility of this object is to wrap HTML elements and encapsulate interactions with the UI, meaning that this is where all calls to WebDriver will go. This is where most WebElements are. And this is the only place you need to modify when the UI changes. In general, Page Object contains locators of the elements situated on the page and some business logic that may be reused by different tests: public class ModelInfoPage extends AbstractPage { @FindBy(css = .help-display strong ) private ExtendedWebElement displayInfoLabel; @FindBy(css = .help-camera strong ) private ExtendedWebElement cameraInfoLabel; @FindBy(css = .help-expansion strong ) private ExtendedWebElement displayRamLabel; @FindBy(css = .help-battery strong ) private ExtendedWebElement batteryInfoLabel; public ModelInfoPage(WebDriver driver) { super(driver); } public String readDisplay() { assertElementPresent(displayInfoLabel); return displayInfoLabel.getText(); } public String readCamera() { assertElementPresent(cameraInfoLabel); return cameraInfoLabel.getText(); } public String readRam() { assertElementPresent(displayRamLabel); return displayRamLabel.getText(); } public String readBattery() { assertElementPresent(displayInfoLabel); return batteryInfoLabel.getText(); } } Important: Page should extend com.qaprosoft.carina.core.gui.AbstractPage Use com.qaprosoft.carina.core.foundation.webdriver.decorator.ExtendedWebElement instead of Selenium WebElement Locate Page Object classes in src/main/java","title":"Implementation of Page Objects"},{"location":"automation/web/#implementation-of-ui-components","text":"In some cases, it is useful to implement UI Objects that may be reused between multiple Page Objects. For instance, a top menu or footer may be shared between multiple pages: public class FooterMenu extends AbstractUIObject { @FindBy(linkText = Home ) private ExtendedWebElement homeLink; @FindBy(linkText = Compare ) private ExtendedWebElement compareLink; public FooterMenu(WebDriver driver, SearchContext searchContext) { super(driver, searchContext); } public HomePage openHomePage() { homeLink.click(); return new HomePage(driver); } public CompareModelsPage openComparePage() { compareLink.click(); return new CompareModelsPage(driver); } } And then you can use this in Page Object: public class HomePage extends AbstractPage { @FindBy(id = footmenu ) private FooterMenu footerMenu; @FindBy(xpath = //div[contains(@class, 'brandmenu-v2')]//a ) private List ExtendedWebElement brandLinks; public HomePage(WebDriver driver) { super(driver); } public FooterMenu getFooterMenu() { return footerMenu; } public BrandModelsPage selectBrand(String brand) { LOGGER.info( selecting ' + brand + ' brand... ); for (ExtendedWebElement brandLink : brandLinks) { String currentBrand = brandLink.getText(); LOGGER.info( currentBrand: + currentBrand); if (brand.equalsIgnoreCase(currentBrand)) { brandLink.click(); return new BrandModelsPage(driver); } } throw new RuntimeException( Unable to open brand: + brand); } } Important: UI Object should extend com.qaprosoft.carina.core.gui.AbstractUIObject You should call the super constructor super(driver, searchContext) where searchContext is an instance of org.openqa.selenium.SearchContext Locate UI Object classes in src/main/java source folder","title":"Implementation of UI Components"},{"location":"automation/web/#implementation-of-tests","text":"Carina framework uses TestNG for test organization. In general, test represents a manipulation with Page Objects and additional validations of UI events. Here is a sample test implementation: public class WebSampleTest extends AbstractTest { @Test(description = JIRA#AUTO-0009 ) @MethodOwner(owner = qpsdemo ) public void testCompareModels() { // Open GSM Arena home page and verify page is opened HomePage homePage = new HomePage(getDriver()); homePage.open(); Assert.assertTrue(homePage.isPageOpened(), Home page is not opened ); // Open model compare page FooterMenu footerMenu = homePage.getFooterMenu(); Assert.assertTrue(footerMenu.isUIObjectPresent(2), Footer menu wasn't found! ); CompareModelsPage comparePage = footerMenu.openComparePage(); // Compare 3 models List ModelSpecs specs = comparePage.compareModels( Samsung Galaxy J3 , Samsung Galaxy J5 , Samsung Galaxy J7 Pro ); // Verify model announced dates Assert.assertEquals(specs.get(0).readSpec(SpecType.ANNOUNCED), 2015, November ); Assert.assertEquals(specs.get(1).readSpec(SpecType.ANNOUNCED), 2016, September ); Assert.assertEquals(specs.get(2).readSpec(SpecType.ANNOUNCED), 2017, June ); } } It is good practice to implement all elements search logic of Page Object/UI Object side and perform assertions and validations in the test, do not mix this logic. Important: Test class should extend com.qaprosoft.carina.core.foundation.AbstractTest Test method should start with org.testng.annotations.Test annotation Use getDriver() method to get driver instance in the test Locate tests in src/test/java source folder","title":"Implementation of tests"},{"location":"automation/web/#test-configuration","text":"There are a few critical properties in a config.properties file which are required for web test execution: url=http://www.gsmarena.com platform=* browser=chrome browser_version=* The implemented test cases should be placed in a TestNG xml file according to the test group the test belongs to. You can find more details about TestNG configuration in the official documentation . !DOCTYPE suite SYSTEM http://testng.org/testng-1.0.dtd suite verbose= 1 name= Carina Demo Tests - Web tests skipfailedinvocationcounts= false junit= false parallel= tests data-provider-thread-count= 50 annotations= JDK test name= GSM arena web tests classes class name= com.qaprosoft.carina.demo.WebSampleTest / /classes /test /suite","title":"Test configuration"}]}